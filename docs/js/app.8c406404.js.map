{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4241","webpack:///./src/components/Overview.vue?7cad","webpack:///./src/components/PlayerInventory.vue?e6b5","webpack:///./src/components/Surroundings.vue?0d9d","webpack:///./src/components/InputBar.vue?1ff4","webpack:///./src/components/ContextMenu.vue?eb00","webpack:///./src/components/Output.vue?19c7","webpack:///./src/game/entities/entity.ts","webpack:///./src/App.vue?fac2","webpack:///./src/components/ContextMenu.vue?9c81","webpack:///src/components/ContextMenu.vue","webpack:///./src/components/ContextMenu.vue?ef87","webpack:///./src/components/ContextMenu.vue?1c8d","webpack:///./src/components/InputBar.vue?77e0","webpack:///src/components/InputBar.vue","webpack:///./src/components/InputBar.vue?e09d","webpack:///./src/components/InputBar.vue","webpack:///./src/components/Output.vue?b124","webpack:///./src/components/Message.vue?3d4c","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue?93ea","webpack:///./src/components/Message.vue?87e9","webpack:///src/components/Output.vue","webpack:///./src/components/Output.vue?ea80","webpack:///./src/components/Output.vue?58fd","webpack:///./src/components/Overview.vue?065f","webpack:///./src/game/world/position.ts","webpack:///./src/game/utils/direction.ts","webpack:///./src/game/entities/player.ts","webpack:///./src/vuex/store.ts","webpack:///./src/game/utils/colours.ts","webpack:///./src/game/overview/Display.ts","webpack:///./src/components/Overview.vue","webpack:///./src/components/Overview.vue?81a1","webpack:///./src/components/Overview.vue?fd59","webpack:///./src/components/PlayerInventory.vue?3c13","webpack:///src/components/PlayerInventory.vue","webpack:///./src/components/PlayerInventory.vue?275e","webpack:///./src/components/PlayerInventory.vue?1a41","webpack:///./src/components/Surroundings.vue?447b","webpack:///src/components/Surroundings.vue","webpack:///./src/components/Surroundings.vue?41f9","webpack:///./src/components/Surroundings.vue?c887","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/game/gameloop.ts","webpack:///./src/game/state/GameState.ts","webpack:///./src/game/items/gameItems.js","webpack:///./src/game/utils/RNG.ts","webpack:///./src/game/entities/creatures.ts","webpack:///./src/game/world/genTree.ts","webpack:///./src/game/world/Tile.ts","webpack:///./src/game/world/Chunk.ts","webpack:///./src/game/world/World.ts","webpack:///./src/game/state/gStates/gsMain.ts","webpack:///./src/game/utils/nameGenerator.ts","webpack:///./src/game/state/gStates/gsStart.ts","webpack:///./src/game/state/gsMan.ts","webpack:///./src/game/vue-game-plugin.ts","webpack:///./src/main.ts","webpack:///./src/components/Message.vue?d7a1"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Overview_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Overview_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PlayerInventory_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PlayerInventory_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Surroundings_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Surroundings_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputBar_vue_vue_type_style_index_0_id_4e655706_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_InputBar_vue_vue_type_style_index_0_id_4e655706_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContextMenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ContextMenu_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Output_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Output_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","EntityType","Appvue_type_template_id_3cdfab3c_render","_vm","this","_h","$createElement","_c","_self","attrs","id","on","click","hideContextMenu","contextmenu","$event","preventDefault","showContextMenu","staticRenderFns","ContextMenuvue_type_template_id_045e334f_render","directives","rawName","expression","ref","style","_l","item","staticClass","stopPropagation","handleAction","_v","_s","text","ContextMenuvue_type_template_id_045e334f_staticRenderFns","_data","items","pos","x","y","mixin","methods","contextMenuItems","vm","menuItems","event","comp","e","concat","$parent","$nextTick","ContextMenuvue_type_script_lang_js_","computed","show","_ref","document","getElementById","offsetHeight","offsetWidth","_ref2","posX","posY","left","innerWidth","top","innerHeight","isParent","action","components_ContextMenuvue_type_script_lang_js_","component","componentNormalizer","ContextMenu","InputBarvue_type_template_id_4e655706_scoped_true_render","type","placeholder","domProps","keypress","indexOf","_k","keyCode","submit","focus","inputBar","blur","input","target","composing","inputText","InputBarvue_type_template_id_4e655706_scoped_true_staticRenderFns","InputBarvue_type_script_lang_js_","$store","getters","set","newValue","dispatch","state","colour","colours","querySelector","test","trim","$game","receiveInputText","mounted","components_InputBarvue_type_script_lang_js_","InputBar_component","InputBar","Outputvue_type_template_id_b8fb7c80_render","msg","entity","message","_m","Outputvue_type_template_id_b8fb7c80_staticRenderFns","Messagevue_type_template_id_d9f2841e_render","innerHTML","Messagevue_type_template_id_d9f2841e_staticRenderFns","Messagevue_type_script_lang_js_","entityName","split","console","log","props","components_Messagevue_type_script_lang_js_","Message_component","Message","Outputvue_type_script_lang_js_","components","messages","watch","lastChild","scrollIntoView","components_Outputvue_type_script_lang_js_","Output_component","Output","Overviewvue_type_template_id_b9230306_render","Overviewvue_type_template_id_b9230306_staticRenderFns","position_Position","Position","classCallCheck","join","getRandomPosInChunk","chunkSize","Math","floor","random","ActivityState","Direction","entity_Entity","Entity","attributes","cooldown","currentActivityState","equipmentSlots","hp","level","position","symbol","createClass","DEAD","current","player_Player","_Entity","Player","_this","arguments","undefined","possibleConstructorReturn","getPrototypeOf","armour","attackChance","attackSpeed","damage","dodgeChance","MOVING","arms","fingers","equipped","hand","wrist","back","feet","heads","head","neck","legs","torso","waist","max","creaturesSlain","xp","inherits","xpToNextLevel","levelUp","amount","healed","min","pow","vuex_store","totalBarLength","hpPercent","round","currentHPLength","hpReportString","repeat","padEnd","printHPReport","parseDir","direction","NORTH","SOUTH","WEST","EAST","error","getDirStringFromVector","dir","vue_runtime_esm","use","vuex_esm","InitialState","commandMode","creatures","displayOrigin","highlit","player","splash","store","Store","actions","addCreature","creature","commit","addMessage","clearHighlight","_ref3","dropItems","_ref4","enterCommand","_ref5","highlight","_ref6","tiles","moveCreature","_ref7","_ref8","newPos","movePlayer","_ref9","parseCommand","_","command","sendMessageAtPosition","_ref10","_ref11","setCommandMode","_ref12","setDisplayOrigin","_ref13","vector","setInputText","_ref14","setPlayer","_ref15","setPlayerName","_ref16","setSplash","_ref17","val","setWorld","_ref18","world","creaturesAt","creaturesWithinRadius","radius","Map","instantMode","itemsOnTile","tile","getTile","playerLevel","playerName","playerPos","surroundings","surr","_loop","_loop2","dist","abs","creaturesHere","filter","isDead","map","forEach","count","locations","expanded","totalValue","loc","plural","sort","a","b","worldExists","mutations","ADD_CREATURE","ADD_MESSAGE","_ref19","CLEAR_HIGHLIGHTED","DROP_ITEMS","_ref20","_tile$items","toConsumableArray","HIGHLIGHT_TILES","MOVE_CREATURE","_ref21","_state$creatures$newP","MOVE_PLAYER","_ref22","_ref23","slicedToArray","assign","SET_COMMAND_MODE","SET_DISPLAY_ORIGIN","SET_INPUT_TEXT","SET_PLAYER","SET_PLAYER_NAME","SET_SPLASH","SET_WORLD","START_GAME","levelColour","brightness","diff","display","lib","bg","fg","forceSquareRatio","drawWorld","clear","curOpts","getOptions","ceil","height","bot","width","right","hl","foreground","draw","Overviewvue_type_script_lang_ts_","extend","canvas","dOpts","displayX","offsetLeft","displayY","offsetTop","_this$$store$getters$","displayOriginX","displayOriginY","creaturesOnTile","species","itemDrops","getItemsPrettyOutput","reduce","arr","find","el","newItemEntry","resizeOverview","overviewDiv","_display$computeSize","computeSize","_display$computeSize2","setOptions","appendChild","getContainer","addEventListener","lodash_default","debounce","components_Overviewvue_type_script_lang_ts_","Overview_component","Overview","PlayerInventoryvue_type_template_id_6fc48455_render","PlayerInventoryvue_type_template_id_6fc48455_staticRenderFns","PlayerInventoryvue_type_script_lang_js_","components_PlayerInventoryvue_type_script_lang_js_","PlayerInventory_component","PlayerInventory","Surroundingsvue_type_template_id_c8e1c20a_render","creatureData","index","mouseenter","mouseleave","getStyle","button","toggleExpanded","expandedItem","_e","Surroundingsvue_type_template_id_c8e1c20a_staticRenderFns","Surroundingsvue_type_script_lang_js_","lvl","components_Surroundingsvue_type_script_lang_js_","Surroundings_component","Surroundings","Appvue_type_script_lang_js_","created","start","handleKeyUp","handleKeyDown","receiveInputKeyDown","receiveInputKeyUp","src_Appvue_type_script_lang_js_","App_component","App","gameloop","run","locationsToCreaturesMap","getCreaturesToUpdate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_step$value","aggressive","aggressiveCreature","targetCreatures","update","_iterator","iterator","next","done","err","return","requestAnimationFrame","game_gameloop","GameState_GameState","GameState","gameItems","Item","itemObject","ItemFactory","itemParams","Array","isArray","getRandomInRange","sum","fn","methodName","getItemValue","prop","range","slope","Crafting","has","addMethod","gameItems_this","Food","heal","edible","uncooked","gold","Ingredients","Trophies","RNG","AllCreatures","entries","CreaturesTemplates","creatures_Creature","Creature","template","moveSpeed","minTotalHP","maxTotalHP","missChance","healthBar","namePlural","drops","harvest","items_gameItems","quantity","newItem","creatures_getGold","attacks","attacksToWeightsMap","weights","attack","chance","attackName","getWeightedValue","att","minDamage","maxDamage","attackMessage","receiveDamage","global","_this2","acc","outputs","keys","itemName","output","info","FIGHTING","move","dropChance","creatures_genCreatures","numberInChunk","spawnChance","creatureLevel","genTree","trees","prob","total","rand","tree","world_genTree","Tile_Tile","Tile","chunk","terrain","relPos","spawnRateModifiers","spawnrate","CHUNK_SIZE","Chunk_Chunk","Chunk","generate","_parseDir","_parseDir2","getChunk","tileX","tileY","size","pLvl","World_World","World","chunks","spawnChunk","genChunk","chunkCoords","chunkExists","getChunkFromTile","getTileFromWorldCoords","gsMain_MainGameState","_GameState","MainGameState","config_display","main","_overviewDiv$getBound","getBoundingClientRect","divWidth","divHeight","drawText","gsMain","firstNames","lastNames","fullNames","generateName","f","gsStart_StartGameState","StartGameState","confirmPlayerName","toUpperCase","gsMan","nextState","gsStart","gsMan_GameStateManager","init","keyUp","keyDown","redraw","caller","install","Vue","options","StartGame","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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,MAAA,WAmDIuW,GAAQK,cAnDZ,CAAAtW,IAAA,UAAAN,MAAA,SAsDUgH,GACN,GAAIiH,GAAM1G,QAAQuL,YAAa,CAE7B,OAAQ9L,GACN,IAAK,UACL,IAAK,IACHiH,GAAMvG,SAAS,aAAc,SAC7B6O,GAAQK,YACR,MACF,IAAK,YACL,IAAK,IACH3I,GAAMvG,SAAS,aAAc,SAC7B6O,GAAQK,YACR,MACF,IAAK,YACL,IAAK,IACH3I,GAAMvG,SAAS,aAAc,QAC7B6O,GAAQK,YACR,MACF,IAAK,aACL,IAAK,IACH3I,GAAMvG,SAAS,aAAc,QAC7B6O,GAAQK,YACR,MACF,QACE,MAEJ3I,GAAMvG,SAAS,gBAjFrB,CAAApH,IAAA,QAAAN,MAAA,SAqFQgH,GACAiH,GAAM1G,QAAQuL,cAtFtB,CAAAxS,IAAA,mBAAAN,MAAA,SA2FmBgH,GACViH,GAAM1G,QAAQuL,cACb,WAAW/K,KAAKf,GAClBiH,GAAMvG,SAAS,aAAc,CAC3Be,OAAQ,OACRC,QACE,sJAKJuF,GAAMvG,SAAS,aAAc,CAC3Be,OAAQ,aACRC,QAAS,eAAiB1B,SAxGpC6c,EAAA,CAAmC9G,IA+GtBsH,GAAS,IAAIV,GCvHpBW,GAAuB,CAC3B,OACA,YACA,UACA,SACA,QACA,UACA,SACA,UACA,WACA,aACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,WACA,UACA,SACA,aACA,YACA,SACA,YACA,UACA,YACA,SACA,YACA,YACA,WACA,UACA,SACA,SACA,QACA,WACA,YACA,WACA,WACA,YACA,YACA,UACA,SACA,aACA,UACA,WACA,SACA,SACA,aACA,YACA,OACA,QACA,SACA,OACA,MACA,SACA,SACA,QACA,OACA,WACA,UACA,SACA,WACA,SACA,UACA,WACA,WACA,WACA,UACA,WACA,UACA,OACA,QACA,UACA,YACA,OACA,UACA,OACA,OACA,OACA,aACA,QACA,QACA,MACA,aACA,WACA,QACA,QACA,QACA,SACA,QACA,SACA,YACA,SACA,SACA,MACA,UACA,QACA,SACA,eACA,UACA,UACA,WACA,OACA,WACA,SACA,SACA,WACA,QACA,YACA,WACA,WACA,UACA,UACA,WACA,WACA,YACA,UACA,QACA,SACA,UACA,UACA,UACA,YACA,WACA,QACA,WACA,QACA,SACA,OACA,YACA,UACA,YACA,YACA,WACA,WACA,UACA,SACA,SACA,aACA,MACA,QACA,QACA,WACA,YACA,UACA,WACA,WACA,cACA,YACA,OACA,MACA,KACA,UACA,SACA,SACA,WACA,YACA,cACA,aACA,OACA,QACA,OACA,QACA,OACA,SACA,UACA,WACA,UACA,SACA,SACA,QACA,SACA,UACA,QACA,QACA,MACA,SACA,SACA,QAGIC,GAAsB,CAC1B,YACA,cACA,YACA,cACA,UACA,YACA,YACA,YACA,YACA,UACA,cACA,YACA,YACA,aACA,gBACA,eACA,SACA,aACA,cACA,UACA,YACA,WACA,WACA,gBACA,cACA,aACA,aACA,aACA,eACA,eACA,WACA,QACA,cACA,SACA,WACA,SACA,UACA,SACA,UACA,UACA,SACA,WACA,WACA,WACA,aACA,UACA,SACA,YACA,UACA,UACA,YACA,cACA,aACA,aACA,cACA,YACA,WACA,cACA,aACA,cACA,UACA,SACA,WACA,eACA,WACA,UACA,SACA,WACA,UACA,WACA,cACA,QACA,SACA,YACA,YACA,SACA,aACA,OACA,QACA,WACA,QACA,eACA,UACA,aACA,YACA,YACA,SACA,YACA,aACA,YACA,WACA,aACA,YACA,OACA,eACA,UACA,aACA,aACA,aACA,SACA,aACA,cACA,QACA,iBACA,SACA,YACA,QACA,aACA,WACA,YACA,aACA,cACA,UACA,aACA,gBACA,YACA,aACA,SACA,QACA,WACA,UACA,aACA,cACA,WACA,aACA,eACA,YACA,WACA,UACA,UACA,aACA,aACA,WACA,SACA,UACA,WACA,aACA,UACA,QACA,eACA,eACA,WACA,YACA,aACA,cACA,iBACA,eACA,aACA,gBACA,YACA,YACA,WACA,cACA,eACA,iBACA,YACA,eACA,gBACA,WA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","file":"js/app.8c406404.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dragon-slayer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerInventory.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerInventory.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Surroundings.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Surroundings.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputBar.vue?vue&type=style&index=0&id=4e655706&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputBar.vue?vue&type=style&index=0&id=4e655706&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=style&index=0&lang=css&\"","import { Creature } from \"./creatures\";\nimport { Item } from \"../../types\";\nimport { Player } from \"./player\";\nimport Position from \"../world/position\";\n\ninterface IAttributes {\n  armour: number;\n  attackChance: number;\n  attackSpeed: number;\n  damage: number;\n  dodgeChance: number;\n}\n\nexport enum EntityType {\n  Creature,\n  Player,\n}\n\nexport const isPlayer = (entity: Creature | Player): entity is Player =>\n  (<Creature>entity).type === EntityType.Player;\n\nexport enum ActivityState {\n  MOVING = \"moving\",\n  FIGHTING = \"fighting\",\n  DEAD = \"dead\",\n}\n\nexport interface HP {\n  current: number;\n  max: number;\n}\n\n// type EquipmentSlotName =\n//   | \"head\"\n//   | \"neck\"\n//   | \"torso\"\n//   | \"back\"\n//   | \"wrist\"\n//   | \"hand\"\n//   | \"finger\"\n//   | \"waist\"\n//   | \"legs\"\n//   | \"feet\";\n\ninterface EquipmentSlot {\n  equipped: Item | null;\n  // name: EquipmentSlotName;\n}\n\nexport interface HumanoidBody {\n  arms?: Array<{\n    fingers: Array<EquipmentSlot>;\n    hand: EquipmentSlot;\n    wrist: EquipmentSlot;\n  }>;\n  back: EquipmentSlot;\n  feet: EquipmentSlot;\n  heads: Array<{\n    head: EquipmentSlot;\n    neck: EquipmentSlot;\n  }>;\n  legs: EquipmentSlot;\n  torso: EquipmentSlot;\n  waist: EquipmentSlot;\n}\n\nexport class Entity {\n  attributes: IAttributes;\n  cooldown: number;\n  currentActivityState: ActivityState;\n  equipmentSlots?: HumanoidBody;\n  hp: HP;\n  items: Item[];\n  level: number;\n  position: Position;\n  symbol: string;\n  target?: Creature | Player;\n  type: EntityType;\n\n  constructor({\n    attributes,\n    cooldown,\n    currentActivityState,\n    equipmentSlots,\n    hp,\n    items,\n    level,\n    position,\n    symbol,\n    target,\n    type,\n  }: {\n    attributes: IAttributes;\n    cooldown: number;\n    currentActivityState: ActivityState;\n    equipmentSlots?: HumanoidBody;\n    hp: HP;\n    items: Item[];\n    level: number;\n    position: Position;\n    symbol: string;\n    target?: Creature | Player;\n    type: EntityType;\n  }) {\n    this.attributes = attributes;\n    this.cooldown = cooldown;\n    this.currentActivityState = currentActivityState;\n    this.equipmentSlots = equipmentSlots;\n    this.hp = hp;\n    this.items = items;\n    this.level = level;\n    this.position = position;\n    this.symbol = symbol;\n    this.target = target;\n    this.type = type;\n  }\n\n  isDead(): boolean {\n    return this.currentActivityState === ActivityState.DEAD || this.hp.current <= 0;\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"},on:{\"click\":_vm.hideContextMenu,\"contextmenu\":function($event){$event.preventDefault();return _vm.showContextMenu($event)}}},[_c('Output'),_c('Overview'),_c('surroundings'),_c('player-inventory'),_c('input-bar'),_c('context-menu')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],ref:\"menu\",style:(_vm.style),attrs:{\"id\":\"context-menu\"}},_vm._l((this.items),function(item,i){return _c('div',{key:i},[_c('div',{staticClass:\"context-item\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAction(item)}}},[_vm._v(\"\\n      \"+_vm._s(item.text)+\"\\n    \")])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"context-menu\" v-show=\"show\" ref=\"menu\" :style=\"style\">\n    <div v-for=\"(item, i) in this.items\" :key=\"i\">\n      <div @click.stop=\"handleAction(item)\" class=\"context-item\">\n        {{item.text}}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nlet data = {\n  items: [],\n  pos: {\n    x: 0,\n    y: 0,\n  },\n};\n\nexport const mixin = {\n  methods: {\n    contextMenuItems(vm, menuItems, event) {},\n    hideContextMenu() {\n      data.items = [];\n    },\n    showContextMenu(event) {\n      let pos = { x: event.x, y: event.y };\n      let items = [];\n      let comp = this;\n      while (comp) {\n        let e = comp.contextMenuItems(comp, items, event) || [];\n        items = [].concat(items, e);\n        comp = comp.$parent;\n      }\n      data.items = items;\n      this.$nextTick(() => {\n        data.pos = pos;\n      });\n    },\n  },\n};\nexport default {\n  computed: {\n    show() {\n      return this.items.length > 0;\n    },\n    style() {\n      const { offsetWidth, offsetHeight } = document.getElementById(\n        \"context-menu\"\n      ) || { offsetHeight: 0, offsetWidth: 0 };\n      const [posX, posY] = [this.pos.x, this.pos.y];\n      return {\n        left:\n          posX + offsetWidth < window.innerWidth\n            ? `${posX}px`\n            : `${posX - offsetWidth}px`,\n        top:\n          posY + offsetHeight < window.innerHeight\n            ? `${posY}px`\n            : `${posY - offsetHeight}px`,\n      };\n    },\n  },\n  data() {\n    return data;\n  },\n  methods: {\n    handleAction(item) {\n      if (item.isParent) {\n        item.action();\n      } else {\n        item.action();\n        this.hideContextMenu();\n      }\n    },\n  },\n};\n</script>\n\n<style>\n#context-menu {\n  position: absolute;\n  max-width: 240px;\n  max-height: 90vh;\n  color: var(--text-blur);\n  background: var(--ui-border);\n  padding: 10px 0px;\n  z-index: 1;\n  border-radius: 4px;\n  box-shadow: 0px 2px 15px 0px #232323;\n}\n\n.context-item {\n  padding: 10px;\n  margin: 0;\n  cursor: pointer;\n}\n\n.context-item:hover {\n  background: var(--ui-dark);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContextMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContextMenu.vue?vue&type=template&id=045e334f&\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContextMenu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"input-bar\"}},[_vm._v(\"\\n  > \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"type\":\"text\",\"id\":\"input-text\",\"placeholder\":\"_\"},domProps:{\"value\":(_vm.inputText)},on:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submit($event)},\"focus\":function($event){return _vm.inputBar('focus')},\"blur\":function($event){return _vm.inputBar('blur')},\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"input-bar\">\n    > <input type=\"text\" id=\"input-text\" placeholder=\"_\"\n     v-model=\"inputText\" @keypress.enter=\"submit\"\n     @focus=\"inputBar('focus')\" @blur=\"inputBar('blur')\"/>\n  </div>\n</template>\n\n<script>\nexport default {\n  computed: {\n    inputText: {\n      get() {\n        return this.$store.getters.inputText;\n      },\n      set(newValue) {\n        this.$store.dispatch(\"setInputText\", newValue);\n      },\n    },\n  },\n  methods: {\n    inputBar(state) {\n      const colours = [\"#434241\", \"#262626\"];\n      let colour;\n\n      switch (state) {\n        case \"focus\":\n          colour = colours[0];\n          this.$store.dispatch(\"setCommandMode\", \"text\");\n          break;\n        case \"blur\":\n          colour = colours[1];\n          this.$store.dispatch(\"setCommandMode\", \"instant\");\n          break;\n      }\n\n      document.querySelector(\"#input-bar\").style[\"background-color\"] = colour;\n      document.querySelector(\"#input-text\").style[\"background-color\"] = colour;\n    },\n    submit() {\n      // Only submit if there are non-whitespace chars\n      if (!/^\\s*$/.test(this.inputText)) {\n        let input = this.inputText.trim();\n        this.$store.dispatch(\"enterCommand\", input);\n        this.$game.receiveInputText(input);\n      }\n    },\n  },\n  mounted() {\n    document.querySelector(\"#input-text\").focus();\n  },\n};\n</script>\n\n<style scoped>\n#input-bar {\n  padding: 4px 10px 4px 10px;\n  color: var(--text);\n  background-color: var(--ui-darker);\n  font-family: \"Ubuntu Mono\", monospace;\n}\n\n#input-text {\n  width: 92%;\n  resize: auto;\n  padding: 4px 0px 4px 0px;\n  border-style: none;\n  outline: none;\n  background-color: var(--ui-darker);\n  /* Text */\n  color: var(--text);\n  font-size: 0.95em;\n  font-family: \"Ubuntu Mono\", monospace;\n  caret-color: var(--text-blur);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputBar.vue?vue&type=template&id=4e655706&scoped=true&\"\nimport script from \"./InputBar.vue?vue&type=script&lang=js&\"\nexport * from \"./InputBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InputBar.vue?vue&type=style&index=0&id=4e655706&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e655706\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"output\"}},[_vm._l((_vm.messages),function(msg,i){return _c('message',{key:i,attrs:{\"entity\":msg.entity,\"message\":msg.message}})}),_vm._m(0)],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"messageBg\"}},[_c('div',{staticClass:\"entity\"}),_c('div',{staticClass:\"message\"})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messages\",on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.showContextMenu($event)}}},[_c('div',{staticClass:\"entity\"},[_vm._v(_vm._s(_vm.entity))]),_c('div',{staticClass:\"message\",domProps:{\"innerHTML\":_vm._s(_vm.message)}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"messages\" @click.right.stop.prevent=\"showContextMenu\">\n    <div class=\"entity\">{{entity}}</div>\n    <div class=\"message\" v-html=\"message\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  methods: {\n    contextMenuItems(vm) {\n      return [\n        {\n          action: () => {\n            vm.$store.dispatch(\"setInputText\",\n              vm.message\n            );\n          },\n          text: \"Resend message\",\n        },\n        {\n          action: () => {\n            let entityName;\n            if (vm.entity.split(\" \").length > 1) {\n              entityName = `@'${vm.entity}'`;\n            } else {\n              entityName = `@${vm.entity}`;\n            }\n            vm.$store.dispatch(\"setInputText\", `${entityName} `);\n          },\n          text: `Reply to ${vm.entity}`,\n        },\n        {\n          action: () => {\n            console.log(\"TODO: pass more than just the name into the message to inspect.\");\n          },\n          text: `Inspect ${vm.entity}`,\n        },\n      ];\n    },\n  },\n  props: [\"entity\", \"message\"],\n};\n</script>\n\n<style>\n.messages {\n  display: flex;\n  flex-shrink: 0;\n  overflow-x: hidden;\n}\n\n.messages:first-child > div {\n  padding-top: 8px;\n}\n\n.messages:hover .entity {\n  color: var(--text);\n  background-color: var(--ui-darker);\n}\n\n.messages:hover .message {\n  background-color: var(--ui-dark);\n}\n\n.entity {\n  flex: 0 0 140px;\n  padding: 3px 10px;\n  color: var(--text-blur);\n  background-color: var(--ui-dark);\n  text-transform: capitalize;\n  white-space: pre-wrap;\n}\n\n@media (max-width: 500px) {\n  .entity {\n    display: none;\n  }\n}\n\n.message {\n  flex: 1 1;\n  padding: 3px 10px;\n  margin: none;\n  color: var(--text);\n  background-color: var(--ui);\n  white-space: pre-wrap;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=d9f2841e&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"output\">\n    <message v-for=\"(msg, i) in messages\" :entity=\"msg.entity\" :message=\"msg.message\" :key=\"i\"/>\n    <div id=\"messageBg\"><div class=\"entity\"/><div class=\"message\"/></div>\n  </div>\n</template>\n\n<script>\nimport Message from \"./Message\";\n\nexport default {\n  components: {\n    Message,\n  },\n  computed: {\n    messages() {\n      return this.$store.getters.messages;\n    },\n  },\n  methods: {\n    contextMenuItems(vm) {\n      return [\n        {\n          action: () => {\n            console.log(vm.$store);\n          },\n          text: \"Log vuex\",\n        },\n        {\n          action: () => {},\n          text: \"Do Nothing\",\n        },\n      ];\n    },\n  },\n  watch: {\n    messages() {\n      this.$nextTick(() => {\n        document.querySelector(\"#output\").lastChild.scrollIntoView();\n      });\n    },\n  },\n};\n</script>\n\n<style>\n#output {\n  display: flex;\n  flex-flow: column;\n  overflow-y: auto;\n}\n\n#output::-webkit-scrollbar {\n  width: 8px;\n}\n\n#output::-webkit-scrollbar-track {\n  background-color: var(--ui-dark);\n}\n\n#output::-webkit-scrollbar-thumb {\n  background-color: var(--ui-border);\n}\n\n#messageBg {\n  display: flex;\n  flex: 1 1;\n}\n#messageBg div {\n  padding-top: 0px;\n  padding-bottom: 0px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Output.vue?vue&type=template&id=b8fb7c80&\"\nimport script from \"./Output.vue?vue&type=script&lang=js&\"\nexport * from \"./Output.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Output.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"overview\"},on:{\"contextmenu\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.showContextMenu($event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// export type Position = [number, number];\n\nexport default class Position {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  key(): string {\n    return [this.x, this.y].join();\n  }\n}\n\nexport const getRandomPosInChunk = (chunkSize: number, left: number, top: number): Position =>\n  new Position(\n    Math.floor(Math.random() * chunkSize) + left * chunkSize,\n    Math.floor(Math.random() * chunkSize) + top * chunkSize\n  );\n","export enum Direction {\n  NORTH = \"north\",\n  SOUTH = \"south\",\n  EAST = \"east\",\n  WEST = \"west\",\n}\n\nexport function parseDir(direction: Direction): [number, number] {\n  switch (direction) {\n    case Direction.NORTH:\n      return [0, -1];\n    case Direction.SOUTH:\n      return [0, 1];\n    case Direction.WEST:\n      return [-1, 0];\n    case Direction.EAST:\n      return [1, 0];\n    default:\n      console.error(`${direction} is not a valid direction.`);\n  }\n  return [0, 0];\n}\n\nexport function getDirStringFromVector(x: number, y: number): string {\n  let dir = [];\n  if (y < 0) dir.push(\"north\");\n  else if (y > 0) dir.push(\"south\");\n  if (x < 0) dir.push(\"west\");\n  else if (x > 0) dir.push(\"east\");\n  if (!x && !y) dir.push(\"here\");\n  return dir.join(\" \");\n}\n","import { CreatureName } from \"./creatures\";\nimport Position from \"../world/position\";\nimport store from \"../../vuex/store\";\nimport { ActivityState, Entity, EntityType, HumanoidBody } from \"./entity\";\n\n// export interface Player {\n//   creaturesSlain: { [key in CreatureName]?: number };\n//   inventory?: any;\n//   slots?: any;\n// }\n\nexport class Player extends Entity {\n  creaturesSlain: { [key in CreatureName]?: number };\n  name: string;\n  xp: number;\n\n  constructor(name: string = \"\", level: number = 1) {\n    super({\n      attributes: {\n        armour: 0,\n        attackChance: 0.45,\n        attackSpeed: 30,\n        damage: 10,\n        dodgeChance: 0.15,\n      },\n      cooldown: 35,\n      currentActivityState: ActivityState.MOVING,\n      equipmentSlots: {\n        arms: [\n          {\n            fingers: [\n              { equipped: null },\n              { equipped: null },\n              { equipped: null },\n              { equipped: null },\n            ],\n            hand: {\n              equipped: null,\n            },\n            wrist: {\n              equipped: null,\n            },\n          },\n          {\n            fingers: [\n              { equipped: null },\n              { equipped: null },\n              { equipped: null },\n              { equipped: null },\n            ],\n            hand: {\n              equipped: null,\n            },\n            wrist: {\n              equipped: null,\n            },\n          },\n        ],\n        back: {\n          equipped: null,\n        },\n        feet: {\n          equipped: null,\n        },\n        heads: [\n          {\n            head: { equipped: null },\n            neck: { equipped: null },\n          },\n        ],\n        legs: { equipped: null },\n        torso: { equipped: null },\n        waist: { equipped: null },\n      },\n      hp: {\n        current: 100,\n        max: 100,\n      },\n      items: [],\n      level: level,\n      position: new Position(0, 0),\n      symbol: \"|\",\n      type: EntityType.Player,\n    });\n\n    this.name = name;\n    this.creaturesSlain = {};\n    this.xp = 0;\n  }\n\n  get xpToNextLevel(): number {\n    return Math.round(50 * this.level ** 1.3);\n  }\n\n  get isFullHealth(): boolean {\n    return this.hp.current >= this.hp.max;\n  }\n\n  addXP(xp: number) {\n    while (this.xpToNextLevel < xp) {\n      xp -= this.xpToNextLevel;\n      this.levelUp();\n    }\n    this.xp = xp;\n  }\n\n  heal(amount: number): number {\n    const healed = Math.min(this.hp.max - this.hp.current, amount);\n    this.hp.current += healed;\n\n    return healed;\n  }\n\n  levelUp() {\n    this.level++;\n    this.hp.max = 10 * Math.floor((10 * this.level ** 1.3 + 90) / 10);\n\n    store.dispatch(\"addMessage\", {\n      entity: \"Level up\",\n      message: `Congratulations! You are now level ${this.level}.`,\n    });\n  }\n\n  printHPReport() {\n    const totalBarLength = 40;\n    const hpPercent = Math.round((this.hp.current / this.hp.max) * 100);\n    const currentHPLength = Math.round((totalBarLength / 100) * hpPercent);\n    const hpReportString = `[${this.symbol.repeat(currentHPLength).padEnd(totalBarLength)}] (${\n      this.hp.current\n    }HP)`;\n    store.dispatch(\"addMessage\", {\n      entity: this.name,\n      message: hpReportString,\n    });\n  }\n\n  receiveDamage(damage: number) {\n    this.hp.current = Math.max(0, this.hp.current - damage);\n    if (this.hp.current === 0) {\n      store.dispatch(\"addMessage\", {\n        entity: \"\",\n        message: \"Game over.\", // Do creature report here\n      });\n      this.currentActivityState = ActivityState.DEAD;\n    } else {\n      this.printHPReport();\n    }\n  }\n}\n","import { Creature } from \"../game/entities/creatures\";\nimport { Player } from \"../game/entities/player\";\nimport Position from \"../game/world/position\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport World from \"../game/world/World\";\nimport { Direction, getDirStringFromVector, parseDir } from \"../game/utils/direction\";\nimport { Item, Message, SurroundingsItem } from \"../types\";\n\nVue.use(Vuex);\n\ninterface Surroundings {\n  creatures: {\n    creature: Creature;\n    dir: string;\n    dist: number;\n  }[];\n  items: {\n    [name: string]: SurroundingsItem;\n  };\n}\n\ninterface InitialState {\n  commandMode: string;\n  creatures: {\n    [location: string]: Creature[];\n  };\n  displayOrigin: [number, number];\n  highlit: [];\n  inputText: string;\n  messages: Message[];\n  player: Player;\n  splash: boolean;\n  world?: World;\n}\n\nconst InitialState: InitialState = {\n  commandMode: \"text\",\n  creatures: {},\n  displayOrigin: [0, 0],\n  highlit: [],\n  inputText: \"\",\n  messages: [],\n  player: new Player(),\n  splash: true,\n};\n\nconst store = new Vuex.Store({\n  actions: {\n    addCreature({ commit }, creature) {\n      commit(\"ADD_CREATURE\", creature);\n    },\n    addMessage({ commit }, data) {\n      commit(\"ADD_MESSAGE\", data);\n    },\n    clearHighlight({ commit }) {\n      commit(\"CLEAR_HIGHLIGHTED\");\n    },\n    dropItems({ commit }, data) {\n      commit(\"DROP_ITEMS\", data);\n    },\n    enterCommand({ commit, state }, text) {\n      commit(\"ADD_MESSAGE\", {\n        entity: state.player.name,\n        message: text,\n      });\n      commit(\"SET_INPUT_TEXT\", \"\");\n    },\n    highlight({ commit }, tiles) {\n      commit(\"HIGHLIGHT_TILES\", tiles);\n    },\n    moveCreature({ commit }, { creature, newPos }: { creature: Creature; newPos: Position }) {\n      commit(\"MOVE_CREATURE\", { creature, newPos });\n    },\n    movePlayer({ commit }, dir: Direction) {\n      commit(\"MOVE_PLAYER\", parseDir(dir));\n    },\n    parseCommand(_, command) {\n      console.log(\"Parsing\", command);\n    },\n    // receiveInput({ commit }, input) {\n    // gsMan.receiveInput(input);\n    // },\n    sendMessageAtPosition({ commit, state }, { entity, message, position }) {\n      // Only send messages when player is there\n      if (state.player.position.x === position.x && state.player.position.y === position.y) {\n        commit(\"ADD_MESSAGE\", { entity, message });\n      }\n    },\n    setCommandMode({ commit }, mode) {\n      commit(\"SET_COMMAND_MODE\", mode);\n    },\n    setDisplayOrigin({ commit }, vector) {\n      commit(\"SET_DISPLAY_ORIGIN\", vector);\n    },\n    setInputText({ commit }, text) {\n      commit(\"SET_INPUT_TEXT\", text);\n    },\n    setPlayer({ commit }, player) {\n      commit(\"SET_PLAYER\", player);\n    },\n    setPlayerName({ commit }, name) {\n      commit(\"SET_PLAYER_NAME\", name);\n    },\n    setSplash({ commit }, val) {\n      commit(\"SET_SPLASH\", val);\n    },\n    setWorld({ commit }, world) {\n      commit(\"SET_WORLD\", world);\n    },\n    // startGame({ commit }) {\n    // commit(\"START_GAME\");\n    // },\n  },\n\n  getters: {\n    creatures: state => state.creatures,\n    creaturesAt: state => (x: number, y: number) => {\n      return state.creatures[new Position(x, y).key()] || [];\n    },\n    creaturesWithinRadius: state => (pos: Position, radius: number = 10) => {\n      if (!pos) {\n        return state.creatures;\n      }\n      const creatures = new Map();\n      for (let y = pos.y - radius; y < pos.y + radius; y++) {\n        for (let x = pos.x - radius; x < pos.x + radius; x++) {\n          if (state.creatures[new Position(x, y).key()]) {\n            creatures.set(new Position(x, y).key(), state.creatures[new Position(x, y).key()]);\n          }\n        }\n      }\n      return creatures;\n    },\n    displayOrigin: state => state.displayOrigin,\n    highlit: state => state.highlit || [],\n    inputText: state => state.inputText,\n    instantMode: state => state.commandMode === \"instant\",\n    itemsOnTile: state => (x: number, y: number) => {\n      const tile = state.world && state.world.getTile(new Position(x, y));\n      return tile ? tile.items : [];\n    },\n    messages: state => state.messages,\n    player: state => state.player,\n    playerLevel: state => state.player.level,\n    playerName: state => state.player.name,\n    playerPos: state => state.player.position || new Position(0, 0),\n    splash: state => state.splash,\n    surroundings: state => (radius: number = 2) => {\n      let surr: Surroundings = {\n        creatures: [],\n        items: {},\n      };\n\n      for (let y = -radius; y <= radius; y++) {\n        for (let x = -radius; x <= radius; x++) {\n          const pos: Position = new Position(\n            state.player.position.x + x,\n            state.player.position.y + y\n          );\n\n          if (state.creatures[pos.key()] && state.creatures[pos.key()].length > 0) {\n            const dir = getDirStringFromVector(x, y);\n            const dist = Math.abs(x) + Math.abs(y);\n            const creaturesHere = state.creatures[pos.key()]\n              .filter((creature: Creature) => !creature.isDead())\n              .map((creature: Creature) => ({\n                creature,\n                dir,\n                dist,\n              }));\n            surr.creatures = surr.creatures.concat(creaturesHere);\n          }\n\n          const tile = state.world!.getTile(pos);\n          if (tile.items.length) {\n            tile.items.forEach((item: Item) => {\n              if (surr.items[item.name]) {\n                surr.items[item.name].count++;\n                surr.items[item.name].locations[pos.key()] = {};\n                if (surr.items[item.name].expanded[new Position(x, y).key()]) {\n                  surr.items[item.name].expanded[new Position(x, y).key()].count++;\n                  surr.items[item.name].expanded[new Position(x, y).key()].totalValue += item.val;\n                } else {\n                  surr.items[item.name].expanded[new Position(x, y).key()] = {\n                    count: 1,\n                    dir: getDirStringFromVector(x, y),\n                    loc: {\n                      [pos.key()]: {},\n                    },\n                    name: item.name,\n                    plural: item.plural,\n                    totalValue: item.val,\n                  };\n                }\n              } else {\n                surr.items[item.name] = {\n                  count: 1,\n                  expanded: {\n                    [new Position(x, y).key()]: {\n                      count: 1,\n                      dir: getDirStringFromVector(x, y),\n                      loc: {\n                        [pos.key()]: {},\n                      },\n                      name: item.name,\n                      plural: item.plural,\n                      totalValue: item.val,\n                    },\n                  },\n                  locations: {\n                    [pos.key()]: {},\n                  },\n                  name: item.name,\n                  plural: item.plural,\n                };\n              }\n            });\n          }\n        }\n      }\n\n      surr.creatures.sort((a, b) => {\n        if (a.dist !== b.dist) {\n          return a.dist - b.dist; // Sort by distance\n        } else if (a.creature.level !== b.creature.level) {\n          return b.creature.level - a.creature.level; // Then descending order of level\n        } else {\n          return b.creature.hp.current - a.creature.hp.current; // Then amount of hp\n        }\n      });\n\n      return surr;\n    },\n    world: state => state.world,\n    worldExists: state => !!state.world,\n  },\n\n  mutations: {\n    ADD_CREATURE(state, creature: Creature) {\n      if (state.creatures[creature.position.key()]) {\n        const creatures = state.creatures[creature.position.key()]\n          .concat([creature])\n          .sort((a, b) => b.level - a.level);\n        state.creatures[creature.position.key()] = creatures;\n      } else {\n        Vue.set(state.creatures, creature.position.key(), [creature]);\n      }\n    },\n    ADD_MESSAGE(state, { entity, message }: Message) {\n      state.messages.push({\n        entity: entity,\n        message: message,\n      });\n    },\n    CLEAR_HIGHLIGHTED(state) {\n      state.highlit = [];\n    },\n    DROP_ITEMS(state, { items, pos }: { items: Item[]; pos: Position }) {\n      const tile = state.world!.getTile(pos);\n      tile.items.push(...items);\n    },\n    HIGHLIGHT_TILES(state, tiles) {\n      state.highlit = tiles;\n    },\n    MOVE_CREATURE(state, { creature, newPos }: { creature: Creature; newPos: Position }) {\n      if (state.creatures[newPos.key()]) {\n        state.creatures[newPos.key()].push(\n          ...state.creatures[creature.position.key()].splice(\n            state.creatures[creature.position.key()].indexOf(creature),\n            1\n          )\n        );\n        state.creatures[newPos.key()].sort((a, b) => b.level - a.level);\n      } else {\n        Vue.set(\n          state.creatures,\n          newPos.key(),\n          state.creatures[creature.position.key()].splice(\n            state.creatures[creature.position.key()].indexOf(creature),\n            1\n          )\n        );\n      }\n    },\n    MOVE_PLAYER(state, [x, y]) {\n      const pos = new Position(state.player.position.x + x, state.player.position.y + y);\n      state.player = Object.assign(state.player, { position: pos });\n    },\n    SET_COMMAND_MODE(state, mode) {\n      state.commandMode = mode;\n    },\n    SET_DISPLAY_ORIGIN(state, vector) {\n      state.displayOrigin = vector;\n    },\n    SET_INPUT_TEXT(state, text) {\n      state.inputText = text;\n    },\n    SET_PLAYER(state, player) {\n      state.player = player;\n    },\n    SET_PLAYER_NAME(state, name) {\n      state.player.name = name;\n    },\n    SET_SPLASH(state, val) {\n      state.splash = val;\n    },\n    SET_WORLD(state, world) {\n      Vue.set(state, \"world\", world);\n    },\n    START_GAME() {\n      console.log(\"Probably not going to work here buddy\");\n    },\n  },\n\n  state: InitialState,\n});\n\nexport default store;\n","import store from \"../../vuex/store\";\n\nexport function levelColour(level: number, brightness: number = 40): string {\n  const diff: number = level - store.getters.player.level;\n  let colour: string;\n  if (diff > 10) {\n    colour = `hsl(0, 100%, ${brightness}%)`;\n  } else if (diff < -10) {\n    colour = `hsl(120, 100%, ${brightness}%)`;\n  } else {\n    // converts numbers from 10 to -10 into a val from 120 to 0\n    colour = `hsl(${120 - (diff + 10) * 6}, 100%, ${brightness}%)`;\n  }\n  return colour;\n}\n","import * as ROT from \"rot-js\";\nimport { Creature } from \"../entities/creatures\";\nimport { levelColour } from \"../utils/colours\";\nimport { Player } from \"../entities/player\";\nimport Position from \"../world/position\";\nimport store from \"../../vuex/store\";\nimport Tile from \"../world/Tile\";\nimport World from \"../world/World\";\n\nexport interface Display extends ROT.Display {\n  drawWorld: () => void;\n}\n\nexport const display = new ROT.Display({\n  bg: \"#1e1e1e\",\n  fg: \"#daddd8\",\n  // bg: \"#9e9e9e\", // For debugging\n  forceSquareRatio: true,\n}) as Display;\n\ndisplay.drawWorld = function() {\n  const world: World = store.getters.world;\n  const player: Player = store.getters.player;\n\n  this.clear();\n  const curOpts = this.getOptions();\n  let top = Math.ceil(player.position.y - curOpts.height / 2);\n  let bot = Math.ceil(player.position.y + curOpts.height / 2);\n  let left = Math.ceil(player.position.x - curOpts.width / 2);\n  let right = Math.ceil(player.position.x + curOpts.width / 2);\n  store.dispatch(\"setDisplayOrigin\", [left, top]);\n\n  for (let i = 0, y = top; y < bot; y++) {\n    for (let j = 0, x = left; x < right; x++) {\n      let tile: Tile = world.getTile(new Position(x, y));\n      let hl = store.getters.highlit[[x, y].join()];\n      let symbol = tile.display;\n      let fg = tile.foreground;\n      let bg = \"#1e1e1e\";\n      const creatures: Creature[] = store.getters.creaturesAt(x, y);\n      if (creatures) {\n        creatures.sort((a: Creature, b: Creature) => {\n          if (a.isDead() && b.isDead()) {\n            return 0;\n          } else if (a.isDead()) {\n            return 1;\n          } else if (b.isDead()) {\n            return -1;\n          } else {\n            return b.hp.current - a.hp.current;\n          }\n        });\n      }\n\n      if (hl) {\n        bg = \"#df9\";\n      } else if (tile.items.length > 0) {\n        bg = `hsla(0, 0%, 100%, ${Math.min(tile.items.length / 12, 0.8)})`;\n      }\n\n      if (x === player.position.x && y === player.position.y) {\n        symbol = \"\";\n        // symbol = \"\";\n        // symbol = \"\";\n        if (hl || tile.items.length > 8) {\n          fg = \"#000\";\n        } else {\n          fg = \"#fff\";\n        }\n      } else if (creatures && creatures.length) {\n        if (hl && hl.symbol && hl.colour) {\n          symbol = hl.symbol;\n          fg = hl.colour;\n        } else {\n          symbol = creatures[0].symbol;\n          fg = creatures[0].isDead() ? \"#222\" : levelColour(creatures[0].level);\n        }\n      }\n\n      this.draw(j, i, symbol, fg, bg);\n      j++;\n    }\n    i++;\n  }\n};\n","\n\n\n\n\n\nimport _ from \"lodash\";\nimport { Creature } from \"../game/entities/creatures\";\nimport { display } from \"../game/overview/Display\";\nimport { Item } from \"../types/item\";\nimport store from \"../vuex/store\";\nimport Vue from \"vue\";\n\nexport default Vue.extend({\n  methods: {\n    contextMenuItems(vm: HTMLElement, items: Item[], event: any) {\n      const pos = { x: event.x, y: event.y };\n      const canvas = document.querySelector(\"#overview > canvas\") as HTMLCanvasElement;\n      if (!canvas) return;\n      const dOpts = display.getOptions();\n      const displayX = Math.floor((pos.x - canvas.offsetLeft) * dOpts.width / canvas.offsetWidth);\n      const displayY = Math.floor((pos.y - canvas.offsetTop) * dOpts.height / canvas.offsetHeight);\n      const [displayOriginX, displayOriginY] = this.$store.getters.displayOrigin;\n      console.log(displayOriginX, displayOriginY);\n\n      const creaturesOnTile = this.$store.getters.creaturesAt(\n        displayX + displayOriginX,\n        displayY + displayOriginY,\n      ).map((creature: Creature) => {\n        return {\n          action: () => {\n            if (creature.isDead()) {\n              this.$store.dispatch(\"addMessage\", {\n                entity: `Examine ${creature.species.name}:`,\n                message: `The ${creature.species.name} is dead.`,\n              });\n            } else {\n              const itemDrops = creature.getItemsPrettyOutput();\n              this.$store.dispatch(\"addMessage\", {\n                entity: `Examine ${creature.species.name}:`,\n                message: `The ${creature.species.name} is level ${creature.level} and has ` +\n                  `${creature.hp.current}HP. It will drop ${itemDrops || \"nothing\"}.`,\n              });\n              this.$store.dispatch(\"addMessage\", {\n                entity: \"\",\n                message: creature.printHPReport(true),\n              });\n            }\n          },\n          text: `Examine ${creature.isDead() ? \"dead\" : \"\"} ${creature.species.name}`,\n        };\n      });\n\n      interface ExamineItem {\n        action: () => void;\n        count: number;\n        name: string;\n        plural: string;\n        text: string;\n        val: number;\n      }\n\n      const itemsOnTile = this.$store.getters.itemsOnTile(\n        displayX + displayOriginX,\n        displayY + displayOriginY,\n      ).reduce((arr: ExamineItem[], item: Item) => {\n        const val = arr.find(el => el.name === item.name);\n        if (val) {\n          val.count++;\n          val.val += item.val;\n          val.text = `${val.count} ${val.count === 1 ? val.name : val.plural} (${val.val})`;\n          val.action = () => {\n            store.dispatch(\"addMessage\", {\n              entity: \"\",\n              message: `You examine the ${val.plural}. It is worth ${val.val} gold.`,\n            });\n          };\n        } else {\n          let newItemEntry = {\n            action: () => {\n              store.dispatch(\"addMessage\", {\n                entity: \"\",\n                message: `You examine the ${item.name}. It is worth ${item.val} gold.`,\n              });\n            },\n            count: 1,\n            name: item.name,\n            plural: item.plural,\n            text: `1 ${item.name} (${item.val})`,\n            val: item.val,\n          };\n          arr.push(newItemEntry);\n        }\n        return arr;\n      }, []);\n\n      return [...creaturesOnTile, ...itemsOnTile];\n    },\n    resizeOverview() {\n      if (!this.$store.getters.splash) {\n        let overviewDiv = document.querySelector(\"#overview\") as HTMLDivElement;\n        if (!overviewDiv) return;\n        let [width, height] =\n          display.computeSize(overviewDiv.offsetWidth, overviewDiv.offsetHeight);\n\n        display.setOptions({ height, width });\n        display.drawWorld();\n      }\n    },\n  },\n  mounted() {\n    document.querySelector(\"#overview\")!.appendChild(display.getContainer()!);\n\n    window.addEventListener(\"resize\", _.debounce(this.resizeOverview, 100));\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overview.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Overview.vue?vue&type=template&id=b9230306&\"\nimport script from \"./Overview.vue?vue&type=script&lang=ts&\"\nexport * from \"./Overview.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Overview.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"player-inventory\"}},[_vm._v(\"\\n  Player position:\\n  \"+_vm._s(_vm.playerPos.x)+\",\"+_vm._s(_vm.playerPos.y)+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"player-inventory\">\n    <!-- At some point this will show player inventory, but for now it will show position -->\n    Player position:\n    {{playerPos.x}},{{playerPos.y}}\n  </div>\n</template>\n\n<script>\nexport default {\n  computed: {\n    playerPos() {\n      return this.$store.getters.playerPos;\n    },\n  },\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style>\n#player-inventory {\n  padding: 10px;\n  overflow-y: auto;\n  color: var(--text-blur);\n  background-color: var(--ui-darker);\n  border-color: var(--ui-border);\n  font-family: \"Ubuntu Mono\", monospace;\n  font-size: 0.85em;\n  white-space: pre-wrap;\n}\n\n#player-inventory::-webkit-scrollbar {\n  width: 8px;\n}\n\n#player-inventory::-webkit-scrollbar-track {\n  background-color: var(--ui-darker);\n}\n\n#player-inventory::-webkit-scrollbar-thumb {\n  background-color: var(--ui-border);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerInventory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerInventory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayerInventory.vue?vue&type=template&id=6fc48455&\"\nimport script from \"./PlayerInventory.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerInventory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayerInventory.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"surroundings-output\"}},[(_vm.worldExists)?[_c('div',{staticClass:\"creatures-wrapper\"},[_vm._v(\"\\n      Creatures:\\n      \"),_c('div',{staticClass:\"table-wrapper\"},[_c('table',{staticClass:\"surrounds-categories\"},[_c('tbody',_vm._l((_vm.surroundings.creatures),function(creatureData,index){return _c('tr',{key:(\"creature-\" + index),on:{\"mouseenter\":function($event){return _vm.highlight(creatureData.creature)},\"mouseleave\":function($event){return _vm.highlight()}}},[_c('td',{staticClass:\"symbol\",style:(_vm.getStyle(creatureData.creature.level))},[_vm._v(\"\\n                \"+_vm._s(creatureData.creature.symbol)+\"\\n              \")]),_c('td',{staticClass:\"creature-name\"},[_vm._v(\"\\n                \"+_vm._s(creatureData.creature.isDead() ? \"dead\" : \"\")+\"\\n                \"+_vm._s(creatureData.creature.species.name)+\"\\n              \")]),_c('td',{staticClass:\"creature-level\"},[_vm._v(\"\\n                Level\\n              \")]),_c('td',{style:(_vm.getStyle(creatureData.creature.level))},[_vm._v(\"\\n                \"+_vm._s(creatureData.creature.level)+\"\\n              \")]),_c('td',{staticClass:\"direction\"},[_vm._v(\"\\n                (\"),_c('span',{style:(creatureData.dist ? '' : _vm.getStyle(creatureData.creature.level))},[_vm._v(_vm._s(creatureData.dir))]),_vm._v(\")\\n              \")])])}),0)])])]),_c('div',{staticClass:\"surrounding-items-wrapper\"},[_vm._v(\"\\n      Items:\\n      \"),_c('div',{staticClass:\"table-wrapper\"},[_c('div',{staticClass:\"surrounds-categories\"},_vm._l((_vm.surroundings.items),function(item,i){return _c('div',{key:(\"item-\" + i),staticClass:\"item-list-wrapper\",on:{\"mouseenter\":function($event){return _vm.highlight(null, item.locations)},\"mouseleave\":function($event){return _vm.highlight()},\"click\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.toggleExpanded(item)}}},[_c('div',{staticClass:\"flex-container\"},[_c('span',{staticClass:\"item-count\"},[_vm._v(_vm._s(item.count))]),_c('span',{staticClass:\"item-name\"},[_vm._v(_vm._s(item.count === 1 ? item.name : item.plural))])]),_vm._l((item.expanded),function(expanded,i){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.expandedItem === item.name),expression:\"expandedItem === item.name\"}],key:(\"expanded-\" + i),staticClass:\"expanded-items\",on:{\"mouseenter\":function($event){return _vm.highlight(null, expanded.loc)},\"mouseleave\":function($event){return _vm.highlight()}}},[_c('span',{staticClass:\"item-count\"},[_vm._v(_vm._s(expanded.count))]),_c('span',{staticClass:\"expanded-name\"},[_vm._v(\"\\n                \"+_vm._s(expanded.count === 1 ? expanded.name : expanded.plural)+\"\\n              \")]),_c('span',{staticClass:\"item-value\"},[_vm._v(_vm._s(expanded.totalValue))]),_c('span',{staticClass:\"direction\"},[_vm._v(\"(\"+_vm._s(expanded.dir)+\")\")])])})],2)}),0)])])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"surroundings-output\">\n    <template v-if=\"worldExists\">\n      <div class=\"creatures-wrapper\">\n        Creatures:\n        <div class=\"table-wrapper\">\n          <table class=\"surrounds-categories\">\n            <tbody>\n              <tr v-for=\"(creatureData, index) in surroundings.creatures\"\n                  :key=\"`creature-${index}`\"\n                  @mouseenter=\"highlight(creatureData.creature)\"\n                  @mouseleave=\"highlight()\">\n                <td :style=\"getStyle(creatureData.creature.level)\" class=\"symbol\">\n                  {{creatureData.creature.symbol}}\n                </td>\n                <td class=\"creature-name\">\n                  {{creatureData.creature.isDead() ? \"dead\" : \"\"}}\n                  {{creatureData.creature.species.name}}\n                </td>\n                <td class=\"creature-level\">\n                  Level\n                </td>\n                <td :style=\"getStyle(creatureData.creature.level)\">\n                  {{creatureData.creature.level}}\n                </td>\n                <td class=\"direction\">\n                  (<span\n                     :style=\"creatureData.dist ? '' : getStyle(creatureData.creature.level)\"\n                     >{{creatureData.dir}}</span>)\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div class=\"surrounding-items-wrapper\">\n        Items:\n        <div class=\"table-wrapper\">\n          <div class=\"surrounds-categories\">\n            <div v-for=\"(item, i) in surroundings.items\"\n                 :key=\"`item-${i}`\"\n                 @mouseenter=\"highlight(null, item.locations)\"\n                 @mouseleave=\"highlight()\"\n                 @click.left=\"toggleExpanded(item)\"\n                 class=\"item-list-wrapper\">\n              <div class=\"flex-container\">\n                <span class=\"item-count\">{{item.count}}</span>\n                <span class=\"item-name\">{{item.count === 1 ? item.name : item.plural}}</span>\n              </div>\n              <div v-for=\"(expanded, i) in item.expanded\"\n                   :key=\"`expanded-${i}`\"\n                   @mouseenter=\"highlight(null, expanded.loc)\"\n                   @mouseleave=\"highlight()\"\n                   v-show=\"expandedItem === item.name\"\n                   class=\"expanded-items\">\n                <span class=\"item-count\">{{expanded.count}}</span>\n                <span class=\"expanded-name\">\n                  {{expanded.count === 1 ? expanded.name : expanded.plural}}\n                </span>\n                <span class=\"item-value\">{{expanded.totalValue}}</span>\n                <span class=\"direction\">({{expanded.dir}})</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { levelColour } from \"../game/utils/colours\";\n\nexport default {\n  computed: {\n    surroundings() {\n      return this.$store.getters.surroundings();\n    },\n    worldExists() {\n      return this.$store.getters.worldExists;\n    },\n  },\n  data() {\n    return {\n      expandedItem: \"\",\n    };\n  },\n  methods: {\n    getStyle(lvl) {\n      return \"color: \" + levelColour(lvl);\n    },\n    highlight(entity, locations) {\n      if (entity) {\n        let highlit = {\n          [entity.position.key()]: {\n            colour: entity.isDead() ? \"#888\" : levelColour(entity.level, 30),\n            symbol: entity.symbol,\n          },\n        };\n        this.$store.dispatch(\"highlight\", highlit);\n      } else if (locations) {\n        this.$store.dispatch(\"highlight\", locations);\n      } else {\n        this.$store.dispatch(\"clearHighlight\");\n      }\n    },\n    toggleExpanded(item) {\n      if (item.name === this.expandedItem) {\n        this.expandedItem = \"\";\n      } else {\n        this.expandedItem = item.name;\n      }\n    },\n  },\n};\n</script>\n\n<style>\n#surroundings-output {\n  color: var(--text-blur);\n  background-color: var(--ui-darker);\n  border-color: var(--ui-border);\n  font-family: \"Ubuntu Mono\", monospace;\n  font-size: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n.table-wrapper::-webkit-scrollbar {\n  width: 6px;\n}\n\n.table-wrapper::-webkit-scrollbar-track {\n  background-color: #2b2b2b;\n}\n\n.table-wrapper::-webkit-scrollbar-thumb {\n  background-color: #404040;\n}\n\n.surrounds-categories {\n  table-layout: fixed;\n  padding: 0px;\n  width: 100%;\n  font-size: 14px;\n  cursor: default;\n}\n\n.surrounds-categories tr:hover {\n  background-color: var(--ui-border);\n}\n\n.surrounds-categories td {\n  padding: 3px 4px;\n}\n\n.direction {\n  text-align: right;\n  text-transform: capitalize;\n  width: 85px;\n  margin-left: 10px;\n}\n\n.creatures-wrapper,\n.surrounding-items-wrapper {\n  /* margin: 16px 8px 20px 15px; */\n  margin: 0px 8px 0px 15px;\n  flex: 1 1 0;\n  max-height: 48%;\n}\n\n.table-wrapper {\n  margin: 6px 0px 16px;\n  max-height: 85%;\n  overflow-y: scroll;\n}\n\n.symbol {\n  font-size: 20px;\n  width: 14px;\n}\n\n.creature-name {\n  font-size: 1.1em;\n  text-transform: capitalize;\n  width: 100px;\n}\n\n.creature-level {\n  text-align: right;\n  width: 40px;\n}\n\n.flex-container {\n  display: flex;\n  align-items: center;\n}\n\n.item-list-wrapper {\n  cursor: pointer;\n  padding: 2px 0px;\n}\n\n.item-name {\n  font-size: 1.1em;\n  width: 280px;\n}\n\n.item-count {\n  color: white;\n  flex: 0 0 25px;\n}\n\n.item-value {\n  flex: 0 0 25px;\n  color: yellow;\n}\n\n.expanded-items {\n  align-items: baseline;\n  background-color: #1e1e1e;\n  display: flex;\n  flex-wrap: nowrap;\n  margin: 5px 0px;\n  padding: 2px 0px 2px 10px;\n  width: 95%;\n}\n\n.item-list-wrapper > div:first-of-type {\n  margin-top: 3px;\n}\n\n.expanded-name {\n  margin-right: auto;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Surroundings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Surroundings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Surroundings.vue?vue&type=template&id=c8e1c20a&\"\nimport script from \"./Surroundings.vue?vue&type=script&lang=js&\"\nexport * from \"./Surroundings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Surroundings.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\" @click=\"hideContextMenu\" @click.right.prevent=\"showContextMenu\">\n    <Output/>\n    <Overview/>\n    <surroundings/>\n    <player-inventory/>\n    <input-bar/>\n    <context-menu/>\n  </div>\n</template>\n\n<script>\nimport ContextMenu from \"./components/ContextMenu\";\nimport InputBar from \"./components/InputBar\";\nimport Output from \"./components/Output\";\nimport Overview from \"./components/Overview\";\nimport PlayerInventory from \"./components/PlayerInventory\";\nimport Surroundings from \"./components/Surroundings\";\n\nexport default {\n  components: {\n    ContextMenu,\n    InputBar,\n    Output,\n    Overview,\n    PlayerInventory,\n    Surroundings,\n  },\n  created() {\n    this.$game.start();\n    window.addEventListener(\"keyup\", this.handleKeyUp);\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  },\n  methods: {\n    contextMenuItems(vm, menuItems) {\n      return [\n        {\n          action: () => {\n            console.log(vm);\n          },\n          text: \"Cancel\",\n        },\n      ];\n    },\n    handleKeyDown(event) {\n      if ((event.key !== \"Enter\" || event.key !== \"Escape\") && this.$store.getters.instantMode) {\n        this.$game.receiveInputKeyDown(event.key);\n      }\n    },\n    handleKeyUp(event) {\n      switch (event.key) {\n        case \"Enter\":\n          if (\n            document.querySelector(\"#input-text\").value === \"\" &&\n            !this.$store.instantMode &&\n            this.$store.worldExists\n          ) {\n            document.querySelector(\"#input-text\").blur();\n          } else {\n            document.querySelector(\"#input-text\").focus();\n          }\n          break;\n        case \"Escape\":\n          document.querySelector(\"#input-text\").blur();\n          break;\n        default:\n          this.$game.receiveInputKeyUp(event.key);\n          break;\n      }\n    },\n  },\n  name: \"App\",\n};\n</script>\n\n<style>\n:root {\n  /* UI colours */\n  --ui: #333231;\n  --ui-darker: #262626;\n  --ui-border: #1e1e1e;\n  --ui-dark: #2b2b2b;\n  /* Text colours */\n  --text: #daddd8;\n  --text-blur: #bababa;\n  --select: #323336;\n}\n\n#app {\n  font-family: \"Oxygen Mono\", monospace;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: grid;\n  grid-template-columns: 1fr 350px;\n  grid-template-rows: auto 2fr 1fr 30px;\n  grid-template-areas:\n    \"upper-main upper-right-col\"\n    \"upper-main upper-right-col\"\n    \"lower-main lower-right-col\"\n    \"bottom-bar lower-right-col\";\n  background-color: var(--ui-dark);\n  font-size: 0.95em;\n}\n\n::-moz-selection {\n  background: var(--select);\n}\n::selection {\n  background: var(--select);\n}\n::-o-selection {\n  background: var(--select);\n}\n::-webkit-selection {\n  background: var(--select);\n}\n::-ms-selection {\n  background: var(--select);\n}\n\n@media (max-width: 900px) {\n  #app {\n    grid-template-columns: 1fr;\n    grid-template-rows: 2fr 1fr 30px;\n    grid-template-areas:\n      \"upper-main\"\n      \"lower-main\"\n      \"bottom-bar\";\n  }\n\n  #player-inventory,\n  #surroundings-output {\n    display: none;\n  }\n}\n\n#overview {\n  grid-area: upper-main;\n}\n\n#output {\n  grid-area: lower-main;\n}\n\n#input-bar {\n  grid-area: bottom-bar;\n}\n\n#surroundings-output {\n  grid-area: upper-right-col;\n}\n\n#player-inventory {\n  grid-area: lower-right-col;\n}\n\n#app,\nhtml,\nbody {\n  height: 100%;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3cdfab3c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Creature } from \"./entities/creatures\";\nimport { display } from \"./overview/Display\";\nimport store from \"../vuex/store\";\n\nconst gameloop = {\n  run: () => {\n    const locationsToCreaturesMap = getCreaturesToUpdate();\n    for (const [location, creatures] of locationsToCreaturesMap) {\n      const aggressive: Creature[] = creatures.filter((creature: Creature) => creature.aggressive);\n      if (aggressive.length > 1 && creatures.length > 1) {\n        aggressive.forEach(aggressiveCreature => {\n          aggressiveCreature.targetCreatures(creatures);\n        });\n      }\n      creatures.forEach((creature: Creature) => {\n        creature.update();\n      });\n    }\n    display.drawWorld();\n    window.requestAnimationFrame(gameloop.run);\n  },\n};\n\nfunction getCreaturesToUpdate() {\n  const dOpts = display.getOptions();\n  const radius = Math.max(dOpts.width, dOpts.height);\n\n  const playerPos = store.getters.playerPos;\n  if (!playerPos) console.error(\"No player position in game loop\");\n\n  return store.getters.creaturesWithinRadius(playerPos, radius);\n}\n\nexport default gameloop;\n","export abstract class GameState {\n  readonly name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  abstract init(): void;\n  abstract receiveInputText(text: string): void;\n  abstract redraw(): void;\n}\n","import Crafting from \"./json/Crafting\";\nimport Food from \"./json/Food\";\nimport Ingredients from \"./json/Ingredients\";\nimport Trophies from \"./json/Trophies\";\n\nlet gameItems = new Map();\n\nclass Item {\n  constructor(itemObject) {\n    for (const key in itemObject) {\n      this[key] = itemObject[key];\n    }\n  }\n}\n\nclass ItemFactory {\n  constructor(itemObject) {\n    for (let key in itemObject) {\n      this[key] = itemObject[key];\n    }\n    this.methods = {};\n  }\n\n  newItem() {\n    const itemParams = {};\n    for (const key in this) {\n      if (Array.isArray(this[key]) && key !== \"value\" && key !== \"val\") {\n        itemParams[key] = Math.floor(getRandomInRange(this[key][0], this[key][1]));\n      } else if (key !== \"value\") {\n        itemParams[key] = this[key];\n      }\n    }\n    itemParams.val = this.value.reduce((sum, fn) => (sum += fn(itemParams)), 0);\n    return new Item(itemParams);\n  }\n\n  addMethod(methodName, fn) {\n    this.methods[methodName] = fn;\n  }\n}\n\nfunction getRandomInRange(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n/**\n * Returns a random int between item minVal and maxVal mapped on minProp and maxProp inclusive\n * item.val and item.prop are arrays of length 2, with form [min, max]\n */\nfunction getItemValue(item, prop, range) {\n  let val = item[prop];\n  let slope = (item.val[1] - item.val[0] + 1) / (range[1] - range[0] + 1);\n  return Math.floor((val - range[0]) * slope + item.val[0]);\n}\n\nCrafting.forEach(i => {\n  let item;\n  if (!gameItems.has(i.name)) {\n    item = new ItemFactory(i);\n    item.value = [itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1])];\n  } else {\n    item = gameItems.get(i.name);\n    for (let key in i) {\n      item[key] = i[key];\n    }\n    item.value.push(itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1]));\n  }\n  if (!item.plural) {\n    item.plural = item.name + \"s\";\n  }\n  item.addMethod(\"craft\", () => console.log(`Crafting with ${this.name}`));\n  gameItems.set(item.name, item);\n});\n\nFood.forEach(i => {\n  let item;\n  if (!gameItems.has(i.name)) {\n    item = new ItemFactory(i);\n    item.value = [itemParams => getItemValue(itemParams, \"heal\", i.heal.slice())];\n  } else {\n    item = gameItems.get(i.name);\n    for (let key in i) {\n      item[key] = i[key];\n    }\n    item.value.push(itemParams => getItemValue(itemParams, \"heal\", i.heal.slice()));\n  }\n  if (!item.plural) item.plural = item.name;\n  item.edible = true;\n  item.addMethod(\"cook\", () => (item.uncooked = false));\n  gameItems.set(item.name, item);\n});\n\n// Gold\nif (!gameItems.has(\"gold\")) {\n  const gold = new ItemFactory({\n    name: \"gold\",\n    plural: \"gold\",\n    value: [() => 1],\n  });\n  gameItems.set(\"gold\", gold);\n}\n\nIngredients.forEach(i => {\n  let item;\n  if (!gameItems.has(i.name)) {\n    item = new ItemFactory(i);\n    item.value = [itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1])];\n  } else {\n    item = gameItems.get(i.name);\n    for (let key in i) {\n      item[key] = i[key];\n    }\n    item.value.push(itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1]));\n  }\n  if (!item.plural) item.plural = item.name;\n  item.addMethod(\"combine\", () => console.log(`Using ingredient ${this.name}`));\n  gameItems.set(item.name, item);\n});\n\nTrophies.forEach(i => {\n  let item;\n  if (!gameItems.has(i.name)) {\n    item = new ItemFactory(i);\n    item.value = [itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1])];\n  } else {\n    item = gameItems.get(i.name);\n    for (let key in i) {\n      item[key] = i[key];\n    }\n    item.value.push(itemParams => getRandomInRange(itemParams.val[0], itemParams.val[1]));\n  }\n  if (!item.plural) {\n    item.plural = item.name + \"s\";\n  }\n  gameItems.set(item.name, item);\n});\n\nexport default gameItems;\n","export function RNG(min?: number, max?: number): number {\n  if (min !== undefined && max !== undefined) {\n    return Math.random() * (max - min) + min;\n  } else if (min !== undefined) {\n    return Math.random() * min;\n  } else {\n    return Math.random();\n  }\n}\n","import * as ROT from \"rot-js\";\nimport CreaturesJSON from \"./CreaturesTemplates.json\";\nimport gameItems from \"../items/gameItems\";\nimport { Item } from \"../../types\";\nimport { Player } from \"./player\";\nimport { RNG } from \"../utils/RNG\";\nimport store from \"../../vuex/store\";\nimport { ActivityState, Entity, EntityType, HP } from \"./entity\";\nimport Position, { getRandomPosInChunk } from \"../world/position\";\n\nexport type CreatureName =\n  | \"dragon\"\n  | \"giant\"\n  | \"troll\"\n  | \"orc\"\n  | \"goblin\"\n  | \"thief\"\n  | \"skeleton\"\n  | \"ghost\"\n  | \"giant rat\"\n  | \"giant spider\"\n  | \"wolf\"\n  | \"boar\"\n  | \"snake\"\n  | \"rat\"\n  | \"spider\"\n  | \"fox\"\n  | \"deer\"\n  | \"pig\"\n  | \"rabbit\";\n\nconst AllCreatures = new Map(Object.entries(CreaturesJSON));\n\ninterface CreatureAttack {\n  chance: number;\n  maxDamage: number;\n  messages: string[];\n  minDamage: number;\n  name: string;\n}\n\ntype WeightedAttackMap = {\n  [attackName: string]: number;\n};\n\ntype HarvestItems = Array<{ name: string; quantity: number[] }>;\n\ninterface CreatureTemplate {\n  attacks: CreatureAttack[];\n  attributes: {\n    maxTotalHP: number;\n    minTotalHP: number;\n    healthBar: string;\n    spawnChance: number;\n    aggressive: boolean;\n  };\n  drops: {\n    equipment: string[];\n    gold: {\n      dropChance: number;\n      max: number;\n    };\n    harvest: HarvestItems;\n    potions: {\n      dropChance: number;\n      max: number;\n    };\n  };\n  name: string;\n  namePlural: string;\n  messages: {\n    onDeath: string[];\n    onSpawn: string[];\n  };\n  missChance: number;\n}\n\nexport class Creature extends Entity {\n  aggressive: boolean;\n  attacks: CreatureAttack[];\n  attacksToWeightsMap: WeightedAttackMap;\n  moveSpeed: number;\n  slots?: any;\n  species: {\n    name: CreatureName;\n    plural: string;\n  };\n  target?: Creature | Player;\n\n  constructor({\n    level,\n    pos,\n    template,\n  }: {\n    level: number;\n    pos: Position;\n    template: CreatureTemplate;\n  }) {\n    const moveSpeed = Math.floor(RNG(20, 600));\n    const hp = Math.floor(RNG(template.attributes.minTotalHP, template.attributes.maxTotalHP));\n    super({\n      attributes: {\n        armour: 1,\n        attackChance: 1 - template.missChance,\n        attackSpeed: 35,\n        damage: 1,\n        dodgeChance: 0.2,\n      },\n      cooldown: moveSpeed,\n      currentActivityState: ActivityState.MOVING,\n      hp: {\n        current: hp,\n        max: hp,\n      } as HP,\n      items: [] as Item[],\n      level: level,\n      position: pos as Position,\n      symbol: template.attributes.healthBar,\n      type: EntityType.Creature,\n    });\n\n    this.species = {\n      name: template.name as CreatureName,\n      plural: template.namePlural,\n    };\n\n    this.aggressive = template.attributes.aggressive;\n\n    this.items = template.drops.harvest\n      .filter(item => gameItems.has(item.name))\n      .map(item => {\n        const quantity =\n          item.quantity[1] !== 1 ? Math.floor(RNG(item.quantity[0], item.quantity[1])) : 1;\n        return gameItems.get(item.name).newItem(quantity);\n      })\n      .concat(getGold(template.drops.gold));\n\n    this.moveSpeed = moveSpeed;\n\n    this.attacks = template.attacks;\n    this.attacksToWeightsMap = this.attacks.reduce(\n      (weights, attack) => {\n        weights[attack.name] = attack.chance;\n        return weights;\n      },\n      {} as WeightedAttackMap\n    );\n  }\n\n  attack() {\n    if (!this.target) {\n      return;\n    }\n\n    if (this.attributes.attackChance > RNG()) {\n      if (this.target instanceof Creature) {\n        store.dispatch(\"sendMessageAtPosition\", {\n          entity: \"\",\n          message: `The ${this.species.name} missed the ${this.target.species.name}.`,\n          position: this.position,\n        });\n      } else if (this.target instanceof Player) {\n        store.dispatch(\"addMessage\", {\n          entity: this.species.name,\n          message: `The ${this.species.name} missed you.`,\n        });\n      }\n      return;\n    }\n\n    const attackName = ROT.RNG.getWeightedValue(this.attacksToWeightsMap);\n    const attack = this.attacks.find(att => att.name === attackName);\n    if (!attack) {\n      console.error(attackName + \" doesn't exist for \" + this.species.name);\n      return;\n    }\n    const damage = Math.floor((RNG(attack.minDamage, attack.maxDamage) * this.level) / 1.5);\n\n    if (this.target instanceof Creature) {\n      store.dispatch(\"sendMessageAtPosition\", {\n        entity: \"\",\n        message: `The ${this.species.name} used ${attackName} on the ${\n          this.target.species.name\n        } for ${damage}.`,\n        position: this.position,\n      });\n    } else if (this.target instanceof Player) {\n      const attackMessage =\n        attack.messages[Math.floor(RNG(attack.messages.length))] + damage + \" HP\";\n      store.dispatch(\"addMessage\", {\n        entity: this.species.name,\n        message: attackMessage,\n      });\n    }\n\n    this.target.receiveDamage(damage);\n\n    if (this.target.isDead()) {\n      this.currentActivityState = ActivityState.MOVING;\n      this.cooldown = this.moveSpeed;\n      this.level++;\n    }\n  }\n\n  printHPReport(global: boolean = false) {\n    const totalBarLength = 40;\n    const hpPercent = Math.round((this.hp.current / this.hp.max) * 100);\n    const currentHPLength = Math.round((totalBarLength / 100) * hpPercent);\n    const hpReportString = `[${this.symbol.repeat(currentHPLength).padEnd(totalBarLength)}] (${\n      this.hp.current\n    }HP)`;\n\n    // Disable eslint because it complains about ternary indentation\n    /* eslint-disable */\n    global\n      ? store.dispatch(\"addMessage\", {\n          entity: this.species.name,\n          message: hpReportString,\n        })\n      : store.dispatch(\"sendMessageAtPosition\", {\n          entity: this.species.name,\n          message: hpReportString,\n          position: this.position,\n        });\n    /* eslint-enable */\n  }\n\n  receiveDamage(damage: number) {\n    this.hp.current = Math.max(0, this.hp.current - damage);\n    if (this.hp.current <= 0) {\n      store.dispatch(\"sendMessageAtPosition\", {\n        entity: \"\",\n        message: `The ${this.species.name} died and dropped ${this.getItemsPrettyOutput()}.`,\n        position: this.position,\n      });\n      this.currentActivityState = ActivityState.DEAD;\n      this.dropItems();\n    } else {\n      this.printHPReport();\n    }\n  }\n\n  getItemsPrettyOutput(): string {\n    const items = this.items.reduce(\n      (acc, item) => {\n        if (item === undefined) return acc;\n        if (acc[item.name]) acc[item.name]++;\n        else acc[item.name] = 1;\n        return acc;\n      },\n      {} as { [itemName: string]: number }\n    );\n    const outputs = Object.keys(items).map(itemName => {\n      if (items[itemName] === 1) {\n        return `1 ${itemName}`;\n      } else {\n        // know this is not undefined because we only add to items when things exist in this.items\n        return `${items[itemName]} ${this.items.find(el => el.name === itemName)!.plural}`;\n      }\n    });\n    const output =\n      outputs.length > 1\n        ? outputs.slice(0, -1).join(\", \") + \", and \" + outputs.slice(-1)\n        : outputs[0] || \"\";\n\n    return output;\n  }\n\n  dropItems() {\n    store.dispatch(\"dropItems\", { items: this.items.splice(0), pos: this.position });\n  }\n\n  move() {\n    switch (Math.floor(Math.random() * 4)) {\n      case 0:\n        store.dispatch(\"moveCreature\", {\n          creature: this,\n          newPos: new Position(this.position.x, this.position.y - 1),\n        });\n        this.position.y--;\n        break;\n      case 1:\n        store.dispatch(\"moveCreature\", {\n          creature: this,\n          newPos: new Position(this.position.x, this.position.y + 1),\n        });\n        this.position.y++;\n        break;\n      case 2:\n        store.dispatch(\"moveCreature\", {\n          creature: this,\n          newPos: new Position(this.position.x - 1, this.position.y),\n        });\n        this.position.x--;\n        break;\n      case 3:\n        store.dispatch(\"moveCreature\", {\n          creature: this,\n          newPos: new Position(this.position.x + 1, this.position.y),\n        });\n        this.position.x++;\n        break;\n    }\n  }\n\n  targetCreatures(creatures: Creature[]) {\n    for (const c of creatures) {\n      if (c === this) {\n        continue;\n      }\n      if (\n        c.hp.current < this.hp.current &&\n        this.currentActivityState === ActivityState.MOVING &&\n        c.currentActivityState === ActivityState.MOVING\n      ) {\n        console.info(`${this.position.key()}: ${this.species.name} attacking ${c.species.name}`);\n        this.currentActivityState = ActivityState.FIGHTING;\n        c.currentActivityState = ActivityState.FIGHTING;\n        this.target = c;\n        c.target = this;\n        this.cooldown = this.attributes.attackSpeed;\n        c.cooldown = c.attributes.attackSpeed + 10; // aggressor attacks first\n      }\n    }\n  }\n\n  update() {\n    if (this.cooldown > 0) {\n      this.cooldown--;\n      return;\n    }\n\n    switch (this.currentActivityState) {\n      case ActivityState.MOVING:\n        this.cooldown = this.moveSpeed;\n        this.move();\n        break;\n      case ActivityState.FIGHTING:\n        this.cooldown = this.attributes.attackSpeed;\n        this.attack();\n        break;\n      case ActivityState.DEAD:\n        this.cooldown = 0;\n        break;\n    }\n  }\n}\n\nconst getGold = ({ max, dropChance }: { max: number; dropChance: number }): Item[] => {\n  const gold = [];\n  if (RNG() < dropChance) {\n    const quantity = Math.floor(RNG(max));\n    for (let i = 0; i < quantity; i++) {\n      gold.push(gameItems.get(\"gold\").newItem());\n    }\n  }\n  return gold;\n};\n\nconst getItems = (creatureItemsArray: HarvestItems): Item[] => {\n  let items: Item[] = [];\n  creatureItemsArray.forEach(item => {\n    if (gameItems.has(item.name)) {\n      let quantity;\n      if (item.quantity[1] !== 1) {\n        quantity =\n          Math.floor(Math.random() * (item.quantity[1] - item.quantity[0] + 1)) + item.quantity[0];\n      } else {\n        quantity = 1;\n      }\n      for (let i = 0; i < quantity; i++) {\n        let newItem = gameItems.get(item.name).newItem();\n        items.push(newItem);\n      }\n    }\n  });\n  return items;\n};\n\nexport const genCreatures = (\n  chunkSize: number,\n  left: number,\n  top: number,\n  playerLevel: number = 1\n) => {\n  AllCreatures.forEach(c => {\n    let numberInChunk = Math.round(c.attributes.spawnChance * 0.5 * chunkSize ** 2);\n    for (let i = 0; i < numberInChunk; i++) {\n      let creatureLevel = Math.ceil(Math.random() * playerLevel * 1.5);\n      let pos = getRandomPosInChunk(chunkSize, left, top);\n      let creature = new Creature({\n        level: creatureLevel,\n        pos: pos,\n        template: c,\n      });\n      store.dispatch(\"addCreature\", creature);\n    }\n  });\n};\n","const genTree = () => {\n  const trees = [\n    {\n      prob: 40,\n      symbol: \"\",\n    },\n    // {\n    //   prob: 20\n    //   symbol: \"\",\n    // },\n    // {\n    //   prob: 15\n    //   symbol: \"\",\n    // },\n    {\n      prob: 22,\n      symbol: \"\",\n    },\n    {\n      prob: 18,\n      symbol: \"\",\n    },\n    {\n      prob: 6,\n      symbol: \"\",\n    },\n    {\n      prob: 5,\n      symbol: \"\",\n    },\n    {\n      prob: 10,\n      symbol: \"\",\n    },\n    {\n      prob: 4,\n      symbol: \"\",\n    },\n    {\n      prob: 4,\n      symbol: \"\",\n    },\n    {\n      prob: 2,\n      symbol: \"\",\n    },\n    {\n      prob: 2,\n      symbol: \"\",\n    },\n    {\n      prob: 2,\n      symbol: \"\",\n    },\n    // {\n    //   \"prob\": 1\n    //   \"symbol\": \"\",\n    // },\n    {\n      prob: 1,\n      symbol: \"\",\n    },\n  ];\n\n  trees.sort((a, b) => b.prob - a.prob);\n  let total = trees.reduce((acc, el) => (el.prob += acc), 0);\n  let rand = Math.floor(Math.random() * total);\n  let tree = 0;\n  while (rand >= trees[tree + 1].prob) {\n    tree++;\n  }\n  return trees[tree].symbol;\n};\n\nexport default genTree;\n","import Chunk from \"./Chunk\";\nimport { Creature } from \"../entities/creatures\";\nimport genTree from \"./genTree\";\nimport { Item } from \"../../types\";\nimport Position from \"./position\";\n\ntype Terrain = \"forest\" | \"mountain\" | \"hills\" | \"river\";\n\nexport default class Tile {\n  chunk: Chunk;\n  display: string;\n  foreground: string;\n  items: Item[];\n  relPos: Position;\n  spawnRateModifiers: Map<Creature, number>;\n\n  constructor(x: number, y: number, chunk: Chunk, terrain?: Terrain) {\n    this.chunk = chunk;\n    this.items = [];\n    this.relPos = new Position(x, y);\n\n    switch (terrain) {\n      case \"forest\":\n        this.display = genTree();\n        this.foreground = \"#086623\";\n        break;\n      default:\n        this.display = \"\";\n        this.foreground = \"#855e40\";\n        break;\n    }\n    this.spawnRateModifiers = new Map();\n  }\n\n  setSpawnRateMod(creature: Creature, spawnrate: number) {\n    this.spawnRateModifiers.set(creature, spawnrate);\n  }\n\n  getSpawnRateMod(creature: Creature) {\n    return this.spawnRateModifiers.has(creature) ? this.spawnRateModifiers.get(creature) : 1;\n  }\n}\n","import { genCreatures } from \"../entities/creatures\";\nimport Position from \"./position\";\nimport store from \"../../vuex/store\";\nimport Tile from \"./Tile\";\nimport World from \"./World\";\nimport { Direction, parseDir } from \"../utils/direction\";\n\nconst CHUNK_SIZE: number = 64;\n\nexport default class Chunk {\n  pos: Position;\n  world: World;\n  tiles: Array<Tile[]>;\n\n  constructor(x: number, y: number, world: World) {\n    this.pos = new Position(x, y);\n    // this.x = x;\n    // this.y = y;\n    this.world = world;\n    this.tiles = [];\n\n    for (let i = 0; i < CHUNK_SIZE; i++) {\n      this.tiles[i] = [];\n      for (let j = 0; j < CHUNK_SIZE; j++) {\n        if (Math.random() > 0.4) {\n          this.tiles[i][j] = new Tile(i, j, this, \"forest\");\n        } else {\n          this.tiles[i][j] = new Tile(i, j, this);\n        }\n      }\n    }\n\n    this.generate();\n  }\n\n  static get size() {\n    return CHUNK_SIZE;\n  }\n\n  getAdjChunk(direction: Direction) {\n    const [x, y] = parseDir(direction);\n    return this.world.getChunk(new Position(this.pos.x + x, this.pos.y + y));\n  }\n\n  getTile(x: number, y: number) {\n    return this.tiles[x][y];\n  }\n\n  getTileFromWorldCoords(tileX: number, tileY: number) {\n    return this.getTile(\n      Math.abs((Chunk.size + tileX) % Chunk.size),\n      Math.abs((Chunk.size + tileY) % Chunk.size)\n    );\n  }\n\n  generate() {\n    // console.info(\"Generating: %O\", this);\n    // Terrain -> structure -> creatures -> player\n    let pLvl = store.getters.playerLevel;\n    genCreatures(Chunk.size, this.pos.x, this.pos.y, pLvl);\n  }\n}\n","import Chunk from \"./Chunk\";\nimport { Player } from \"../entities/player\";\nimport Position from \"./position\";\nimport { RNG } from \"../utils/RNG\";\nimport Tile from \"./Tile\";\n\nexport default class World {\n  chunks: Map<string, Chunk>;\n  spawnChunk: Chunk;\n\n  constructor() {\n    this.chunks = new Map();\n\n    // Generate starting chunk\n    this.spawnChunk = this.genChunk(new Position(0, 0));\n    // Generate surrounding chunks\n    [[0, 1], [0, -1], [1, 0], [-1, 0]].forEach(c => {\n      // console.log(\"generating chunk\", c[0], c[1]);\n      this.genChunk(new Position(c[0], c[1]));\n    });\n\n    // constructor(type, size) {\n    //   this.chunks = new Map();\n    //   this.type = type; // Example types: dungeon, forest, dragon-lair\n    //   this.size = size > 0 ? size : 8; // Arbitrary limit for player spawn chunk\n    //   let spawnChunk = this.genChunk(Math.floor(RNG(this.size)), Math.floor(RNG(this.size)));\n  }\n\n  getChunk(pos: Position) {\n    return this.chunks.get(pos.key());\n  }\n\n  chunkExists(pos: Position): boolean {\n    return this.chunks.has(pos.key());\n  }\n\n  genChunk(pos: Position) {\n    let chunk = new Chunk(pos.x, pos.y, this);\n    this.chunks.set(pos.key(), chunk);\n    return chunk;\n  }\n\n  getChunkFromTile(tile: Position): Chunk {\n    const chunkCoords = new Position(\n      Math.floor(tile.x / Chunk.size),\n      Math.floor(tile.y / Chunk.size)\n    );\n    if (this.chunkExists(chunkCoords)) {\n      return this.getChunk(chunkCoords)!;\n    } else {\n      return this.genChunk(chunkCoords);\n    }\n  }\n\n  getTile(pos: Position): Tile {\n    return this.getChunkFromTile(pos).getTileFromWorldCoords(pos.x, pos.y);\n  }\n}\n","import { display } from \"../../overview/Display\";\nimport displayConf from \"../../config/display.json\";\nimport gameloop from \"../../gameloop\";\nimport { GameState } from \"../GameState\";\nimport { gsMan } from \"../gsMan\";\nimport store from \"../../../vuex/store\";\nimport World from \"../../world/World\";\n\nexport class MainGameState extends GameState {\n  constructor() {\n    super(\"main\");\n  }\n\n  init(): void {\n    display.clear();\n    display.setOptions(displayConf.main);\n\n    store.dispatch(\"setWorld\", new World());\n\n    // Resize only after resetting font size to default\n    const overviewDiv = document.querySelector(\"#overview\");\n\n    // Don't continue running if div doesn't exist\n    if (!overviewDiv) {\n      console.error(\"Overview div not found (css selector #overview)\");\n      return;\n    }\n\n    const { width: divWidth, height: divHeight } = overviewDiv.getBoundingClientRect();\n    const [width, height] = display.computeSize(divWidth, divHeight);\n    display.setOptions({\n      height: height,\n      width: width,\n    });\n\n    display.drawText(0, 0, \"Main state initialised\");\n    display.drawText(2, 2, \"Player: \" + store.getters.playerName);\n\n    display.drawWorld();\n\n    store.dispatch(\"addMessage\", {\n      entity: \"\",\n      message:\n        \"You find yourself in the middle of a forest. Looking around, you see trees extending \" +\n        \"off into the distance.\",\n    });\n    store.dispatch(\"addMessage\", {\n      entity: \"Controls:\",\n      message:\n        \"Use the arrow keys to move around. Additionally, you can press 'enter' to enter command \" +\n        \"mode, where you can type commands to interact with the world. Try entering /help \" +\n        \"in this mode for a list of commands. You can press 'escape' to unfocus the command \" +\n        \"input to use arrow keys to move around.\",\n    });\n\n    gameloop.run();\n  }\n\n  redraw(): void {\n    display.drawWorld();\n  }\n\n  keyDown(input: string) {\n    if (store.getters.instantMode) {\n      // Handle as an instant command\n      switch (input) {\n        case \"ArrowUp\":\n        case \"w\":\n          store.dispatch(\"movePlayer\", \"north\");\n          display.drawWorld();\n          break;\n        case \"ArrowDown\":\n        case \"s\":\n          store.dispatch(\"movePlayer\", \"south\");\n          display.drawWorld();\n          break;\n        case \"ArrowLeft\":\n        case \"a\":\n          store.dispatch(\"movePlayer\", \"west\");\n          display.drawWorld();\n          break;\n        case \"ArrowRight\":\n        case \"d\":\n          store.dispatch(\"movePlayer\", \"east\");\n          display.drawWorld();\n          break;\n        default:\n          break;\n      }\n      store.dispatch(\"highlight\");\n    }\n  }\n\n  keyUp(input: string) {\n    if (store.getters.instantMode) {\n      // do nothing\n    }\n  }\n\n  receiveInputText(input: string) {\n    if (!store.getters.instantMode) {\n      if (/^\\/help$/.test(input)) {\n        store.dispatch(\"addMessage\", {\n          entity: \"Help\",\n          message:\n            \"Press 'enter' to enter typed command mode, and 'escape' to get back to command mode.\" +\n            \"\\nYou can right-click on the map to see what is on that tile.\",\n        });\n      } else {\n        // Handle as text command\n        store.dispatch(\"addMessage\", {\n          entity: \"Main state\",\n          message: \"Response to \" + input,\n        });\n      }\n    }\n  }\n}\n\nexport const gsMain = new MainGameState();\n","const firstNames: string[] = [\n  \"Anno\",\n  \"Panteleon\",\n  \"Orderic\",\n  \"Sancho\",\n  \"Bucca\",\n  \"Arbitio\",\n  \"Ledger\",\n  \"Ricchar\",\n  \"Halinard\",\n  \"Willibrord\",\n  \"Reginar\",\n  \"Gararic\",\n  \"Gararic\",\n  \"Walcaud\",\n  \"Merimas\",\n  \"Dagaric\",\n  \"Crassus\",\n  \"Theuderic\",\n  \"Marcomir\",\n  \"Alberic\",\n  \"Bobuth\",\n  \"Thakkarlig\",\n  \"Thondraec\",\n  \"Nedden\",\n  \"Dwogratin\",\n  \"Grarnec\",\n  \"Fikherlum\",\n  \"Dodoir\",\n  \"Khouthaer\",\n  \"Thongraet\",\n  \"Illithor\",\n  \"Naertho\",\n  \"Inchel\",\n  \"Emmyth\",\n  \"Ayred\",\n  \"Elpaerae\",\n  \"Albondiel\",\n  \"Orndacil\",\n  \"Uldreiyn\",\n  \"Zaltarish\",\n  \"Almithara\",\n  \"Tisharu\",\n  \"Sphiel\",\n  \"Nylaathria\",\n  \"Shearah\",\n  \"Ghilanna\",\n  \"Salihn\",\n  \"Talila\",\n  \"Thasitalia\",\n  \"Merialeth\",\n  \"Rain\",\n  \"Aloha\",\n  \"Lazuli\",\n  \"Herb\",\n  \"Bim\",\n  \"Barley\",\n  \"Walnut\",\n  \"Astro\",\n  \"Axis\",\n  \"Sprinkle\",\n  \"Crisdyr\",\n  \"Jarmon\",\n  \"Leoellan\",\n  \"Lamtar\",\n  \"Clerdil\",\n  \"Yorladar\",\n  \"Rainrath\",\n  \"Eirlamar\",\n  \"Vicphar\",\n  \"Audlamar\",\n  \"Matfrid\",\n  \"Bovo\",\n  \"Bingo\",\n  \"Hartmut\",\n  \"Hildebald\",\n  \"Dudo\",\n  \"Chlotar\",\n  \"Samo\",\n  \"Wala\",\n  \"Ouen\",\n  \"Madelgarde\",\n  \"Katie\",\n  \"Tanta\",\n  \"May\",\n  \"Engelberga\",\n  \"Rosamund\",\n  \"Tanta\",\n  \"Emily\",\n  \"Tavia\",\n  \"Fallon\",\n  \"Linda\",\n  \"Duenna\",\n  \"Adaltrude\",\n  \"Lenora\",\n  \"Regina\",\n  \"May\",\n  \"Tatiana\",\n  \"Pansy\",\n  \"Kelsey\",\n  \"Nantechildis\",\n  \"Ceufroy\",\n  \"Humbert\",\n  \"Fastolph\",\n  \"Dodo\",\n  \"Heribert\",\n  \"Imbert\",\n  \"Audoen\",\n  \"Leuthere\",\n  \"Hagen\",\n  \"Childeric\",\n  \"Fulcaire\",\n  \"Sagramor\",\n  \"Roderic\",\n  \"Ricbodo\",\n  \"Marmadoc\",\n  \"Richomer\",\n  \"Badegisel\",\n  \"Orlando\",\n  \"Guido\",\n  \"Rathar\",\n  \"Walaric\",\n  \"Gouzlim\",\n  \"Adelard\",\n  \"Gerontius\",\n  \"Theobald\",\n  \"Jolly\",\n  \"Goisfrid\",\n  \"Bingo\",\n  \"Benild\",\n  \"Anno\",\n  \"Willichar\",\n  \"Brocard\",\n  \"Panteleon\",\n  \"Hildebald\",\n  \"Bilcuzal\",\n  \"Chlodmer\",\n  \"Norbert\",\n  \"Hunald\",\n  \"Marroc\",\n  \"Theudebald\",\n  \"Nun\",\n  \"Llund\",\n  \"Hridr\",\n  \"Khesnoll\",\n  \"Geillvand\",\n  \"Unngold\",\n  \"Tyonnith\",\n  \"Tufveikr\",\n  \"Prinnuyvirn\",\n  \"Bopluludr\",\n  \"Khuh\",\n  \"Seh\",\n  \"Ga\",\n  \"Sholmof\",\n  \"Gwaecu\",\n  \"Makeil\",\n  \"Steshesh\",\n  \"Rhilgrann\",\n  \"Thugreafthu\",\n  \"Friymiolde\",\n  \"Kran\",\n  \"Grerv\",\n  \"Dhub\",\n  \"Druat\",\n  \"Golk\",\n  \"Totzak\",\n  \"Vognoub\",\n  \"Krunguab\",\n  \"Zucriag\",\n  \"Bretto\",\n  \"Tabbun\",\n  \"Bhoda\",\n  \"Ruruah\",\n  \"Choetoe\",\n  \"Ashai\",\n  \"Traka\",\n  \"Esi\",\n  \"Skudis\",\n  \"Eenaah\",\n  \"Biza\",\n];\n\nconst lastNames: string[] = [\n  \"Undertree\",\n  \"Proudbottom\",\n  \"Hairyfoot\",\n  \"Riverhopper\",\n  \"Gamwich\",\n  \"Fleetfoot\",\n  \"Oakbottom\",\n  \"Gawkroger\",\n  \"Swiftfoot\",\n  \"Oldbuck\",\n  \"Thornburrow\",\n  \"Greenhand\",\n  \"Fleetfoot\",\n  \"North-took\",\n  \"Featherbottom\",\n  \"Gluttonbelly\",\n  \"Noakes\",\n  \"Leafwalker\",\n  \"Underburrow\",\n  \"Twofoot\",\n  \"Runebelly\",\n  \"Ingotarm\",\n  \"Opalmane\",\n  \"Mountainthane\",\n  \"Beastarmour\",\n  \"Hardbranch\",\n  \"Largeblade\",\n  \"Caveshaper\",\n  \"Dragonbraids\",\n  \"Shadowbraids\",\n  \"Wysakian\",\n  \"Heidi\",\n  \"Eilsandoral\",\n  \"Hercan\",\n  \"Thewarin\",\n  \"Vahorn\",\n  \"Virfina\",\n  \"Olaric\",\n  \"Olarora\",\n  \"Brynala\",\n  \"Valsys\",\n  \"Ulabella\",\n  \"Inalamin\",\n  \"Gilphine\",\n  \"Wranharice\",\n  \"Sarvyre\",\n  \"Fenqen\",\n  \"Eladithas\",\n  \"Wranjor\",\n  \"Gendove\",\n  \"Mossymint\",\n  \"Silkblossom\",\n  \"Mistytwist\",\n  \"Falconfoam\",\n  \"Frozengrace\",\n  \"Fernfleck\",\n  \"Woodpond\",\n  \"Cricketfeet\",\n  \"Cloudylace\",\n  \"Beechwillow\",\n  \"Elydark\",\n  \"Zinran\",\n  \"Farvalur\",\n  \"Chaesandoral\",\n  \"Wyngolor\",\n  \"Reynala\",\n  \"Quinan\",\n  \"Daewarin\",\n  \"Ravaric\",\n  \"Sylxidor\",\n  \"Riverhopper\",\n  \"Grubb\",\n  \"Cutton\",\n  \"Oakbottom\",\n  \"Fairbairn\",\n  \"Maggot\",\n  \"Whitbottom\",\n  \"Pott\",\n  \"Banks\",\n  \"Hlothran\",\n  \"Bunce\",\n  \"Noakesburrow\",\n  \"Baggins\",\n  \"Hopesinger\",\n  \"Proudbody\",\n  \"Sackville\",\n  \"Boffin\",\n  \"Fallohide\",\n  \"Silentfoot\",\n  \"Greenhand\",\n  \"Bilberry\",\n  \"Silentfoot\",\n  \"Finnagund\",\n  \"Pott\",\n  \"Silverstring\",\n  \"Butcher\",\n  \"Clayhanger\",\n  \"Littlefoot\",\n  \"Wanderfoot\",\n  \"Maggot\",\n  \"Brockhouse\",\n  \"Underburrow\",\n  \"Chubb\",\n  \"Bolger-Baggins\",\n  \"Boffin\",\n  \"Underfoot\",\n  \"Brown\",\n  \"Bottomhill\",\n  \"Whitfoot\",\n  \"Longriver\",\n  \"Brandybuck\",\n  \"Heathertoes\",\n  \"Dewfoot\",\n  \"Leafwalker\",\n  \"Featherbottom\",\n  \"Greenhand\",\n  \"Sandheaver\",\n  \"Noakes\",\n  \"Grubb\",\n  \"Galbassi\",\n  \"Farfoot\",\n  \"Littlefoot\",\n  \"Thornburrow\",\n  \"Tunnelly\",\n  \"Sandheaver\",\n  \"Noakesburrow\",\n  \"Longriver\",\n  \"Goodsong\",\n  \"Baggins\",\n  \"Lothran\",\n  \"Longbottom\",\n  \"North-took\",\n  \"Whitfoot\",\n  \"Bolger\",\n  \"Twofoot\",\n  \"Longfoot\",\n  \"Brandybuck\",\n  \"Gardner\",\n  \"Brown\",\n  \"Emberswallow\",\n  \"Masterflower\",\n  \"Fusedown\",\n  \"Greensnow\",\n  \"Roughsteel\",\n  \"Netherbrook\",\n  \"Lightningarrow\",\n  \"Ravenbringer\",\n  \"Spiritfist\",\n  \"Mountainbough\",\n  \"Woodbelly\",\n  \"Dustbrand\",\n  \"Darkless\",\n  \"Mourningeye\",\n  \"Earthstalker\",\n  \"Hallowedslayer\",\n  \"Gloomfire\",\n  \"Thunderlance\",\n  \"Autumnbreaker\",\n  \"Clanhell\",\n  \"Dawnstrider\",\n  \"Strongbash\",\n  \"Eaglemore\",\n  \"Barleyswift\",\n  \"Wolfswift\",\n  \"Netherflame\",\n  \"Laughingcrusher\",\n  \"Feathertail\",\n  \"Dayfallow\",\n  \"Dusktail\",\n  \"Cliffswift\",\n  \"Silenttalon\",\n  \"Firespire\",\n  \"Willowdraft\",\n  \"Earthshot\",\n  \"Doomhell\",\n  \"Snowgrain\",\n  \"Gloomwalker\",\n  \"Hazesword\",\n  \"Grandstream\",\n];\n\nconst fullNames: string[] = [\n  \"Fredericus the Deviant\",\n  \"Euvrouin the Bald\",\n  \"Gilebert the Clever\",\n  \"Urian the Guardian\",\n  \"Salaman the Smiling\",\n  \"Symkyn of the Snow\",\n  \"Nick the Lion\",\n  \"Nicolas the Brute\",\n  \"Guarinet the Champion\",\n  \"Ronald the Warm\",\n  \"Maughtild the Stubborn\",\n  \"Aelis the Creature\",\n  \"Aleneite the Selfish\",\n  \"Saloua the Defender\",\n  \"Imagantia the Honest\",\n  \"Lunet the Fierce\",\n  \"Catrain the Brilliant\",\n  \"Elyzabeth the Righteous\",\n  \"Rosemond the Gentlewoman\",\n  \"Lilias the Giant\",\n  \"Archbishop Seri\",\n  \"Monk Aurri\",\n  \"Viscount Euvrouin\",\n  \"Count Dreu\",\n  \"Landgrave Cristoffle\",\n  \"Vicar Pearse\",\n  \"Admiral Galter\",\n  \"Knight Simkin\",\n  \"Peasant Sam\",\n  \"Lord Nicolin\",\n  \"Peasant Henriot\",\n  \"Vicar Ernest\",\n  \"Peasant Ludovicus\",\n  \"Count Davi\",\n  \"Monk Tobyn\",\n  \"King Adie\",\n  \"Yeoman Acelin\",\n  \"Cardinal Hurrey\",\n  \"Baronet Tobye\",\n  \"Admiral Gerrart\",\n  \"Queen Gennon\",\n  \"Queen Tiffan\",\n  \"Squire Luanda\",\n  \"Peasant Juliana\",\n  \"Duchess Emmony\",\n  \"Princess Consort Madlin\",\n  \"Grand Duchess Richmal\",\n  \"Princess Lunete\",\n  \"Countess Ela\",\n  \"Countess Isota\",\n];\n\nexport const generateName = (): string => {\n  let name = \"\";\n\n  if (Math.random() < 0.1) {\n    let n = Math.floor(Math.random() * fullNames.length);\n    name = fullNames[n];\n  } else {\n    let f = Math.floor(Math.random() * firstNames.length);\n    let l = Math.floor(Math.random() * lastNames.length);\n    name = `${firstNames[f]} ${lastNames[l]}`;\n  }\n  return name;\n};\n","import { display } from \"../../overview/Display\";\nimport displayConf from \"../../config/display.json\";\nimport { GameState } from \"../GameState\";\nimport { generateName } from \"../../utils/nameGenerator\";\nimport { gsMan } from \"../gsMan\";\nimport { Player } from \"../../entities/player\";\nimport store from \"../../../vuex/store\";\n\nexport class StartGameState extends GameState {\n  playerName: string;\n\n  constructor() {\n    super(\"start\");\n    this.playerName = \"\";\n  }\n\n  init(): void {\n    display.setOptions(displayConf.start);\n    display.draw(4, 1, \"Trymunx's\", \"#8a8c89\", null);\n    display.draw(4, 2, \"Dragon Slayer\", \"#086623\", null);\n\n    store.dispatch(\"addMessage\", {\n      entity: \"Welcome\",\n      message:\n        \"Greetings adventurer. Please enter your name to begin, or type /generate to have one \" +\n        \"generated for you.\",\n    });\n  }\n\n  receiveInputText(input: string): void {\n    if (this.playerName === \"\") {\n      this.confirmPlayerName(input);\n    } else {\n      switch (input.toUpperCase()) {\n        case \"YES\":\n        case \"Y\":\n          store.dispatch(\"setPlayer\", new Player(this.playerName));\n          store.dispatch(\"setSplash\", false);\n          gsMan.nextState(this);\n          break;\n        case \"NO\":\n        case \"N\":\n          this.playerName = \"\";\n          store.dispatch(\"setPlayerName\", null);\n          store.dispatch(\"addMessage\", {\n            entity: \"Game\",\n            message: \"Please enter a name, or type /generate to have one generated for you.\",\n          });\n          break;\n        case \"/GEN\":\n        case \"/GENERATE\":\n          this.confirmPlayerName(\"/gen\");\n          break;\n        default:\n          this.confirmPlayerName(this.playerName);\n      }\n    }\n  }\n\n  redraw(): void {\n    display.setOptions(displayConf.start);\n    display.draw(4, 1, \"Trymunx's\", \"#8a8c89\", null);\n    display.draw(4, 2, \"Dragon Slayer\", \"#086623\", null);\n  }\n\n  confirmPlayerName(input: string): void {\n    if (/^\\/gen$/.test(input) || /^\\/generate$/.test(input)) {\n      input = generateName();\n    }\n    this.playerName = input;\n    store.dispatch(\"setPlayerName\", input);\n    store.dispatch(\"addMessage\", {\n      entity: \"Confirm name:\",\n      message: `Your name is ${input}. Use this name? [yes/no]`,\n    });\n  }\n}\n\nexport const gsStart = new StartGameState();\n","import { GameState } from \"./GameState\";\nimport { gsMain, MainGameState } from \"./gStates/gsMain\";\nimport { gsStart, StartGameState } from \"./gStates/gsStart\";\n\nclass GameStateManager {\n  state?: GameState;\n\n  StartGame() {\n    this.state = gsStart;\n    this.state.init();\n  }\n\n  receiveInputKeyUp(input: string) {\n    if (this.state instanceof MainGameState) {\n      this.state.keyUp(input);\n    }\n  }\n  receiveInputKeyDown(input: string) {\n    if (this.state instanceof MainGameState) {\n      this.state.keyDown(input);\n    }\n  }\n  receiveInputText(text: string) {\n    console.log(text);\n    if (this.state && this.state.receiveInputText) {\n      this.state.receiveInputText(text);\n    }\n  }\n\n  redraw() {\n    if (this.state && this.state.redraw) {\n      this.state.redraw();\n    }\n  }\n\n  nextState(caller: GameState) {\n    switch (caller.name) {\n      case \"start\":\n        this.state = gsMain;\n        break;\n      case \"main\":\n        break;\n      case \"end\":\n        this.state = gsStart;\n        break;\n      default:\n        console.error(`${caller.name} is not a registered game state.`);\n    }\n    this.state && this.state.init();\n  }\n}\n\nexport const gsMan = new GameStateManager();\n","import _Vue from \"vue\";\nimport { gsMan } from \"./state/gsMan\";\nimport { display, Display } from \"./overview/Display\";\n// import PluginFunction from \"vue/types\";\n// import store from \"../vuex/store\";\n// import CommandParser from \"./Commands/CommandParser\";\n\nexport interface gamePlugin {\n  start: () => void;\n  receiveInputKeyUp: (input: string) => void;\n  receiveInputKeyDown: (input: string) => void;\n  receiveInputText: (text: string) => void;\n  parseCommand: (command: string) => void;\n  worldExists: () => boolean;\n  displaySplash: () => void;\n  display: Display;\n}\n\nexport default function install<T>(Vue: typeof _Vue, options?: T): void {\n  Vue.prototype.$game = {\n    display: display,\n    parseCommand(command) {\n      // return CommandParser.ParseCommand(command);\n      console.log(\"Parsing \" + command);\n    },\n    receiveInputKeyDown(input) {\n      gsMan.receiveInputKeyDown(input);\n    },\n    receiveInputKeyUp(input) {\n      gsMan.receiveInputKeyUp(input);\n    },\n    receiveInputText(text) {\n      gsMan.receiveInputText(text);\n    },\n    start() {\n      gsMan.StartGame();\n    },\n  } as gamePlugin;\n}\n","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport App from \"./App.vue\";\nimport { mixin as contextMixin } from \"./components/ContextMenu.vue\";\nimport game from \"./game/vue-game-plugin\";\nimport store from \"./vuex/store\";\nimport Vue from \"vue\";\n\nVue.config.productionTip = false;\nVue.use(game);\nVue.mixin(contextMixin);\n\nnew Vue({\n  render: h => h(App),\n  store,\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}